{smcl}
{com}{sf}{ul off}{txt}
{com}. 
. 
. 
. **************************DEMOGRAPHICS, SES: Fix this section in all papers*********************************************
. cd "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA"
{res}E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA
{txt}
{com}. 
. use "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\SMALLERDATASETUKBfinalized", clear
{txt}
{com}. 
. 
. keep n_eid n_31_0_0 n_21022_0_0  n_34_0_0 n_52_0_0 n_6138_0_0 n_189_0_0 ts_53_0_0 ts_40000_0_0 ts_40000_1_0 n_21000_0_0 n_709_0_0 n_738_0_0 n_1239_0_0 n_20277_0_0 n_20119_0_0
{txt}
{com}. 
. save "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\DEMOG_SES_UKB", replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\DEMOG_SES_UKB.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. **Exogenous variables: age (@@fix baseline age), gender, household size**
. 
. 
. *Sex*
. capture drop sex
{txt}
{com}. gen sex=n_31_0_0 
{txt}(20 missing values generated)

{com}. recode sex 0=2 1=1
{txt}(273,312 changes made to {bf:sex})

{com}. 
. 
. *Age*
. capture drop Age
{txt}
{com}. gen Age=n_21022_0_0 
{txt}(23 missing values generated)

{com}. 
. *Years of Birth*
. capture drop birthyear
{txt}
{com}. gen birthyear=n_34_0_0 
{txt}(23 missing values generated)

{com}. 
. *Month of Birth*
. capture drop birthmonth
{txt}
{com}. gen birthmonth=n_52_0_0 
{txt}(23 missing values generated)

{com}. 
. *Date of birth*
. capture drop birthdate
{txt}
{com}. gen birthdate=mdy(birthmonth,14,birthyear)
{txt}(23 missing values generated)

{com}. 
. *Baseline Cohort Start Date*
. capture drop startdate
{txt}
{com}. gen startdate=ts_53_0_0 
{txt}(20 missing values generated)

{com}. format startdate %d
{txt}
{com}. 
. *Baseline age**
. capture drop baselineage
{txt}
{com}. gen baselineage=(startdate-birthdate)/365.25
{txt}(23 missing values generated)

{com}. 
. 
. 
. 
. **Household size**
. label var n_709_0_0     "Number in household"
{txt}
{com}. 
. capture drop householdsize
{txt}
{com}. gen householdsize=n_709_0_0
{txt}(2,281 missing values generated)

{com}. label var householdsize "Number of household members"
{txt}
{com}. 
. **-1    Do not know
. **-3    Prefer not to answer
. 
. recode householdsize (-1=. ) (-3=.)
{txt}(2,288 changes made to {bf:householdsize})

{com}. 
. *Ethnicity*
. capture drop ethnicity
{txt}
{com}. 
. gen ethnicity = 1 if inlist(n_21000_0_0,1,1001,1002,1003) 
{txt}(29,818 missing values generated)

{com}. replace ethnicity = 2 if inlist(n_21000_0_0,3,3001,3002,3003,3004)
{txt}(9,879 real changes made)

{com}. replace ethnicity = 3 if inlist(n_21000_0_0,5)
{txt}(1,573 real changes made)

{com}. replace ethnicity = 4 if inlist(n_21000_0_0,4,4001,4002,4003)
{txt}(8,058 real changes made)

{com}. replace ethnicity = 5 if inlist(n_21000_0_0,2,6,2001,2002,2003,2004)
{txt}(7,510 real changes made)

{com}. replace ethnicity = 6 if ethnicity ==.
{txt}(2,798 real changes made)

{com}. 
. label var ethnicity "ethnic group"
{txt}
{com}. label define ethnicityL 1 "white" 2 "south asian" 3 "east asian" 4 "black" 5 "other/mixed" 6 "unknown"
{txt}
{com}. label values ethnicity ethnicityL
{txt}
{com}. 
. capture drop ethnicity2
{txt}
{com}. gen ethnicity2=.
{txt}(502,409 missing values generated)

{com}. replace ethnicity2=ethnicity
{txt}(502,409 real changes made)

{com}. recode ethnicity2 (1=0) (4=1) (2=2) (3=3) (5=3) (6=3) 
{txt}(490,957 changes made to {bf:ethnicity2})

{com}. 
. label var ethnicity2 "ethnic grouping 2"
{txt}
{com}. label define ethnicityL2 0 "white" 1 "black" 2 "south asian" 3 "other" 
{txt}
{com}. label values ethnicity2 ethnicityL2
{txt}
{com}. 
. capture drop RACE_ETHN
{txt}
{com}. gen RACE_ETHN=ethnicity2
{txt}
{com}. 
. capture drop NonWhite
{txt}
{com}. gen NonWhite=.
{txt}(502,409 missing values generated)

{com}. replace NonWhite=RACE_ETHN
{txt}(502,409 real changes made)

{com}. recode NonWhite (0=0) (1=1) (2=1) (3=1)
{txt}(21,760 changes made to {bf:NonWhite})

{com}. 
. label var NonWhite "ethnic grouping 3"
{txt}
{com}. label define ethnicityL3 0 "white" 1 "Non-White"  
{txt}
{com}. label values NonWhite ethnicityL3
{txt}
{com}. 
. 
. ******************DATES*******************************************
. 
. *Years of Birth*
. capture drop birthyear
{txt}
{com}. gen  birthyear=n_34_0_0 
{txt}(23 missing values generated)

{com}. 
. *Month of Birth*
. capture drop birthmonth
{txt}
{com}. gen  birthmonth=n_52_0_0 
{txt}(23 missing values generated)

{com}. 
. *Death Date*
. capture drop deathdate
{txt}
{com}. gen deathdate = ts_40000_0_0 
{txt}(464,512 missing values generated)

{com}. replace deathdate =  ts_40000_1_0 if deathdate ==.
{txt}(0 real changes made)

{com}. format deathdate %d
{txt}
{com}. label var deathdate "date of death"
{txt}
{com}. 
. *Baseline Cohort Start Date*
. capture drop startdate
{txt}
{com}. gen startdate=ts_53_0_0 
{txt}(20 missing values generated)

{com}. 
. ********************************SES******************************
. 
. *Education, qualification*
. capture rename n_6138_0_0 education
{txt}
{com}. recode education -7=. -3=. 7=. 
{txt}(90,748 changes made to {bf:education})

{com}. label define educationL 0 "none" 1 "College/University" 2 "A/AS Levels/Equivalent" 3 "O Levels/GCSEs/Equivalent" 4 "CSEs/Equivalent" 5 "NVQ/HND/HNC/Equivalent" 6 "Other professional qual" 7 "Unknown"
{txt}
{com}. label values education educationL
{txt}
{com}. 
. capture drop educationbr
{txt}
{com}. gen educationbr=.
{txt}(502,409 missing values generated)

{com}. replace educationbr=0 if (education==0 | education==4 | education==5 | education==6)
{txt}(85,407 real changes made)

{com}. replace educationbr=1 if (education==2 | education==3)
{txt}(160,476 real changes made)

{com}. replace educationbr=2 if education==1
{txt}(161,116 real changes made)

{com}. 
. *Deprivation*
. capture rename n_189_0_0 townsend
{txt}
{com}. 
. 
. **Household income before tax**
. label var n_738_0_0     "Average total household income before tax"
{txt}
{com}. 
. **1     Less than 18,000
. **2     18,000 to 30,999
. **3     31,000 to 51,999
. **4     52,000 to 100,000
. **5     Greater than 100,000
. **-1    Do not know
. **-3    Prefer not to answer
. 
. 
. 
. capture drop householdincome
{txt}
{com}. gen householdincome=n_738_0_0   
{txt}(6,034 missing values generated)

{com}. label var householdincome "Average total household income before tax"
{txt}
{com}. 
. recode householdincome (-1=.) (-3=.)
{txt}(71,128 changes made to {bf:householdincome})

{com}. 
. 
. save, replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\DEMOG_SES_UKB.dta{rm}
saved
{p_end}

{com}. 
. **Occupation**
. 
. ***n_20277_0_0***
. *1000s: Managers and senior officials
. *2000s: Professional occupation
. *3000s: Associate professional and technical occupations
. *4000s: Administrative and secretarial occupations
. *5000s: Skilled trades occupations
. *6000s: Personal service occupations
. *7000s: Sales and customer service occupations
. *8000s: Process plants and machine operatives
. *9000s: Elementary occupations
. 
. capture drop occupation
{txt}
{com}. gen occupation=.
{txt}(502,409 missing values generated)

{com}. replace occupation=1 if n_20277_0_0>=1000 & n_20277_0_0<1999
{txt}(55,845 real changes made)

{com}. replace occupation=2 if n_20277_0_0>=2000 & n_20277_0_0<2999
{txt}(75,218 real changes made)

{com}. replace occupation=3 if n_20277_0_0>=3000 & n_20277_0_0<3999
{txt}(56,140 real changes made)

{com}. replace occupation=4 if n_20277_0_0>=4000 & n_20277_0_0<4999
{txt}(50,785 real changes made)

{com}. replace occupation=5 if n_20277_0_0>=5000 & n_20277_0_0<5999
{txt}(24,058 real changes made)

{com}. replace occupation=6 if n_20277_0_0>=6000 & n_20277_0_0<6999
{txt}(19,995 real changes made)

{com}. replace occupation=7 if n_20277_0_0>=7000 & n_20277_0_0<7999
{txt}(11,447 real changes made)

{com}. replace occupation=8 if n_20277_0_0>=8000 & n_20277_0_0<8999
{txt}(14,908 real changes made)

{com}. replace occupation=9 if n_20277_0_0>=9000 & n_20277_0_0<9999
{txt}(16,571 real changes made)

{com}. 
. tab occupation

 {txt}occupation {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}     55,845       17.18       17.18
{txt}          2 {c |}{res}     75,218       23.15       40.33
{txt}          3 {c |}{res}     56,140       17.28       57.61
{txt}          4 {c |}{res}     50,785       15.63       73.23
{txt}          5 {c |}{res}     24,058        7.40       80.64
{txt}          6 {c |}{res}     19,995        6.15       86.79
{txt}          7 {c |}{res}     11,447        3.52       90.31
{txt}          8 {c |}{res}     14,908        4.59       94.90
{txt}          9 {c |}{res}     16,571        5.10      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    324,967      100.00
{txt}
{com}. 
. save, replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\DEMOG_SES_UKB.dta{rm}
saved
{p_end}

{com}. 
. 
. //STEP 2: GENERATE SES VARIABLE//
. 
. 
. **SES: occupation
. 
.  
. 
. **SES: educationbr, householdincome, townsend, occupation
. 
. capture drop zeducationbr 
{txt}
{com}. egen zeducationbr=std(educationbr)
{txt}(95,410 missing values generated)

{com}. 
. capture drop zhouseholdincome 
{txt}
{com}. egen zhouseholdincome=std(householdincome)
{txt}(77,162 missing values generated)

{com}. 
. capture drop ztownsend
{txt}
{com}. egen ztownsend=std(townsend)
{txt}(646 missing values generated)

{com}. 
. capture drop ztownsendinv
{txt}
{com}. gen ztownsendinv=ztownsend*-1
{txt}(646 missing values generated)

{com}. 
. 
. capture drop zoccupation
{txt}
{com}. egen zoccupation=std(occupation)
{txt}(177,442 missing values generated)

{com}. 
. 
. capture drop zoccupationinv
{txt}
{com}. gen zoccupationinv=zoccupation*-1
{txt}(177,442 missing values generated)

{com}. 
. capture drop rowmissSES
{txt}
{com}. egen rowmissSES=rowmiss(zeducationbr zhouseholdincome ztownsendinv zoccupationinv)
{txt}
{com}. 
. tab rowmissSES

 {txt}rowmissSES {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}    257,227       51.20       51.20
{txt}          1 {c |}{res}    158,674       31.58       82.78
{txt}          2 {c |}{res}     67,575       13.45       96.23
{txt}          3 {c |}{res}     18,896        3.76       99.99
{txt}          4 {c |}{res}         37        0.01      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    502,409      100.00
{txt}
{com}. 
. capture drop SES
{txt}
{com}. egen SES=rowmean(zeducationbr zhouseholdincome ztownsendinv zoccupationinv) if rowmissSES<=2
{txt}(18,933 missing values generated)

{com}. 
. 
. save, replace  
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\DEMOG_SES_UKB.dta{rm}
saved
{p_end}

{com}. 
. 
. //STEP 3: GENERATE LIFESTYLE VARIABLES: SMOKING, ALCOHOL, AND PA//
. 
. use "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\SMALLERDATASETUKBfinalized", clear
{txt}
{com}. 
. keep n_eid n_1239_0_0 n_3456_0_0 n_22507_0_0  n_1279_0_0 n_1269_0_0 n_20162_0_0 n_1558_0_0 n_100022_0_0 n_981_0_0 ///
> n_971_0_0 n_894_0_0 n_884_0_0 n_914_0_0 n_904_0_0 n_21022_0_0
{txt}
{com}. 
. save "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\LIFESTYLENODIET_UKB",replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\LIFESTYLENODIET_UKB.dta{rm}
saved
{p_end}

{com}. 
. capture drop Age
{txt}
{com}. gen Age=n_21022_0_0 
{txt}(23 missing values generated)

{com}. 
. 
. *Current Smoking Status*
. capture drop smoking
{txt}
{com}. gen smoking = 0 if  n_1239_0_0 == 0 | n_1239_0_0 == -3
{txt}(53,875 missing values generated)

{com}. replace smoking = 1 if n_22507_0_0 != . 
{txt}(43,998 real changes made)

{com}. replace smoking = 2 if n_1239_0_0 == 1 | n_1239_0_0 == 2
{txt}(52,962 real changes made)

{com}. label var smoking "current smoking status"
{txt}
{com}. label define smokingL 0 "never smoker" 1 "ex-smoker" 2 "current smoker"
{txt}
{com}. label values smoking smokingL
{txt}
{com}. recode smoking .=0
{txt}(891 changes made to {bf:smoking})

{com}. 
. *Cigarettes Per Day*
. capture drop cigperday
{txt}
{com}. gen cigperday = n_3456_0_0 if smoking == 2    //missing values exist - consider imputation
{txt}(465,938 missing values generated)

{com}. replace cigperday = 0 if smoking == 0 | smoking == 1
{txt}(449,447 real changes made)

{com}. replace cigperday = . if cigperday < 0
{txt}(329 real changes made, 329 to missing)

{com}. label var cigperday "if smoking, number of cig per day"
{txt}
{com}. 
. *Aged Stopped Smoking Cigarettes*
. capture drop stopsmoke agestop
{txt}
{com}. gen stopsmoke = Age - n_22507_0_0 
{txt}(458,411 missing values generated)

{com}. label var stopsmoke "intermediate var: baseline age - age stopped smoking"
{txt}
{com}. gen agestop = 1 if stopsmoke < 5
{txt}(496,142 missing values generated)

{com}. replace agestop = 2 if stopsmoke >= 5 & stopsmoke <= 10
{txt}(5,261 real changes made)

{com}. replace agestop = 3 if stopsmoke > 10 & stopsmoke !=.
{txt}(32,470 real changes made)

{com}. label var agestop "how long ago did you quit smoking in years"
{txt}
{com}. label define stopL 1 "< 5 years" 2 " between 5-10 years" 3 "> 10 years"
{txt}
{com}. label values agestop stopL  
{txt}
{com}. 
. *Combine Current Smoking with Ex-smoking duration for protective effects*
. capture drop smokingstatus
{txt}
{com}. gen smokingstatus = 0 if smoking == 2
{txt}(449,447 missing values generated)

{com}. replace smokingstatus = agestop if smokingstatus ==.
{txt}(40,261 real changes made)

{com}. replace smokingstatus = 4 if smoking == 0
{txt}(409,186 real changes made)

{com}. label var smokingstatus "complete smoking status"
{txt}
{com}. label define statusL 0 "current smoker" 1 "ex-smoker < 5 years" 2 "ex-smoker between 5-10 years" 3 "ex-smoker > 10 years" 4 "never smoker"
{txt}
{com}. label values smokingstatus statusL
{txt}
{com}. recode smokingstatus .=4
{txt}(0 changes made to {bf:smokingstatus})

{com}. 
. *Environmental tobacco smoke*
. capture drop etsmoke
{txt}
{com}. replace n_1279_0_0 = . if n_1279_0_0 < 0
{txt}(41,102 real changes made, 41,102 to missing)

{com}. replace n_1269_0_0  = . if n_1269_0_0 < 0
{txt}(11,522 real changes made, 11,522 to missing)

{com}. order n_1279_0_0, after(n_1269_0_0)
{txt}
{com}. egen ets = rowtotal(n_1269_0_0-n_1279_0_0)
{txt}
{com}. gen etsmoke = ets
{txt}
{com}. label var etsmoke "environmental tobacco exposures (hours per week)"
{txt}
{com}. 
. **Pack-years of smoking**
. capture drop packyearssmoke
{txt}
{com}. gen packyearssmoke=n_20162_0_0
{txt}(351,497 missing values generated)

{com}. replace packyearssmoke=0 if smoking==0
{txt}(408,523 real changes made)

{com}. 
. 
. 
. **Use smokingstatus, etsmoke and packyearssmoke as measured variables for SMOKING LATENT VARIABLE OR AVERAGE Z-SCORE*****
. 
. 
. capture drop zsmokingstatus zetsmoke zpackyearssmoke
{txt}
{com}. egen zsmokingstatus=std(smokingstatus)
{txt}
{com}. egen zetsmoke=std(etsmoke)
{txt}
{com}. egen zpackyearssmoke=std(packyearssmoke)
{txt}(25,180 missing values generated)

{com}. 
. 
. capture drop rowmissSMOKE
{txt}
{com}. egen rowmissSMOKE=rowmiss(zsmokingstatus zetsmoke zpackyearssmoke)
{txt}
{com}. 
. tab rowmissSMOKE

{txt}rowmissSMOK {c |}
          E {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}    477,229       94.99       94.99
{txt}          1 {c |}{res}     25,180        5.01      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    502,409      100.00
{txt}
{com}. 
. egen SMOKE=rmean(zsmokingstatus zetsmoke zpackyearssmoke) if rowmissSMOKE<=1
{txt}
{com}. 
. 
. save, replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\LIFESTYLENODIET_UKB.dta{rm}
saved
{p_end}

{com}. 
. 
. ************************************ALCOHOL: fixed code 6 to missing***************************************************
. *https://biobank.ctsu.ox.ac.uk/crystal/label.cgi?id=100098
. 
. *Usual Alcohol intake*
. 
. capture drop alcohol
{txt}
{com}. gen alcohol = 0 if  n_1558_0_0 == 6
{txt}(461,783 missing values generated)

{com}. replace alcohol = 1 if  n_1558_0_0 == 5
{txt}(57,993 real changes made)

{com}. replace alcohol = 2 if  n_1558_0_0 == 4
{txt}(55,838 real changes made)

{com}. replace alcohol = 3 if  n_1558_0_0 == 3
{txt}(129,263 real changes made)

{com}. replace alcohol = 4 if  n_1558_0_0 == 2
{txt}(115,417 real changes made)

{com}. replace alcohol = 5 if  n_1558_0_0 == 1
{txt}(101,750 real changes made)

{com}. replace alcohol = . if  n_1558_0_0 == -3
{txt}(0 real changes made)

{com}. replace alcohol = . if  n_1558_0_0 ==.
{txt}(0 real changes made)

{com}. label var alcohol "alcohol intake frequency"
{txt}
{com}. label define alcoholL 0 "never" 1 "special occasions only" 2 "1-3 times per month" 3 "1-3 times per week" 4 "3-4 times per week" 5 "daily or almost daily" 
{txt}
{com}. label values alcohol alcoholL
{txt}
{com}. 
. 
. 
. **use alcohol ALCOHOL LATENT VARIABLE OR AVERAGE Z-SCORE***
. 
. egen zalcohol=std(alcohol)
{txt}(1,522 missing values generated)

{com}. 
. capture drop ALCOHOL
{txt}
{com}. gen ALCOHOL=zalcohol
{txt}(1,522 missing values generated)

{com}. 
. *************************************PHYSICAL ACTIVITY**********************************************************************
. 
. ***https://biobank.ctsu.ox.ac.uk/crystal/search.cgi?wot=0&srch=physical+activity&sta0=on&sta1=on&sta2=on&sta3=on&str0=on&str3=on&fit0=on&fit10=on&fit20=on&fit30=on&fvt11=on&fvt21=on&fvt22=on&fvt31=on&fvt41=on&fvt51=on&fvt61=on&fvt101=on
. 
. 
. *Physical activity - use the IPAQ scoring guidelines*
. 
. *Walking MET-min/week - use median time of each category*
. capture drop walkperday
{txt}
{com}. gen walkperday = 7.5 if n_981_0_0 == 1
{txt}(495,769 missing values generated)

{com}. replace walkperday = 22.5 if n_981_0_0 == 2
{txt}(76,043 real changes made)

{com}. replace walkperday = 45 if n_981_0_0 == 3
{txt}(127,098 real changes made)

{com}. replace walkperday = 75 if n_981_0_0 == 4
{txt}(62,073 real changes made)

{com}. replace walkperday = 105 if n_981_0_0 == 5
{txt}(31,131 real changes made)

{com}. replace walkperday = 150 if n_981_0_0 == 6
{txt}(22,785 real changes made)

{com}. replace walkperday = 210 if n_981_0_0 == 7
{txt}(23,276 real changes made)

{com}. label var walkperday "walking minutes per day"
{txt}
{com}. 
. *Frequency of Walking (no days per week) - use median time of each category*
. capture drop walkperweek
{txt}
{com}. gen walkperweek = 0.25 if n_971_0_0 == 1
{txt}(475,852 missing values generated)

{com}. replace walkperweek = 0.625 if n_971_0_0 == 2
{txt}(100,399 real changes made)

{com}. replace walkperweek = 1 if n_971_0_0 == 3
{txt}(61,291 real changes made)

{com}. replace walkperweek = 2.5 if n_971_0_0 == 4
{txt}(79,212 real changes made)

{com}. replace walkperweek = 4.5 if n_971_0_0 == 5
{txt}(39,108 real changes made)

{com}. replace walkperweek = 7 if n_971_0_0 == 6
{txt}(42,607 real changes made)

{com}. label var walkperweek "walking days per week"
{txt}
{com}. 
. *Calculate walking MET-min/week*
. capture drop walkMETmin
{txt}
{com}. gen walkMETmin = 3.3 * walkperday * walkperweek
{txt}(154,348 missing values generated)

{com}. label var walkMETmin "MET-min per week walking"
{txt}
{com}. 
. *Moderate exercise MET-min/week*
. capture drop modperday
{txt}
{com}. gen modperday = n_894_0_0 if n_894_0_0 >= 0
{txt}(134,081 missing values generated)

{com}. label var modperday "moderate exercise minutes per day"
{txt}
{com}. 
. *Frequency of moderate exercise (no days per week)*
. capture drop modperweek
{txt}
{com}. gen modperweek =  n_884_0_0 if  n_884_0_0 >= 0
{txt}(27,286 missing values generated)

{com}. label var modperweek "moderate exercise days per week"
{txt}
{com}. 
. *Calculate moderate exercise MET-min/week*
. capture drop modMETmin
{txt}
{com}. gen modMETmin = 4.0 * modperday * modperweek
{txt}(134,081 missing values generated)

{com}. label var modMETmin "MET-min per week moderate exercise"
{txt}
{com}. 
. *Vigorous exercise MET-min/week*
. capture drop vigperday
{txt}
{com}. gen vigperday = n_914_0_0 if n_914_0_0 >= 0
{txt}(232,998 missing values generated)

{com}. label var vigperday "vigorous exercise minutes per day"
{txt}
{com}. 
. *Frequency of vigorous exercise (no days per week)*
. capture drop vigperweek
{txt}
{com}. gen vigperweek = n_904_0_0 if n_904_0_0 >= 0
{txt}(27,595 missing values generated)

{com}. label var vigperweek "vigorous exercise days per week"
{txt}
{com}. 
. *Calculate vigorous exercise MET-min/week*
. capture drop vigMETmin
{txt}
{com}. gen vigMETmin = 8.0 * vigperday * vigperweek
{txt}(232,998 missing values generated)

{com}. label var vigMETmin "MET-min per week vigorous exercise"
{txt}
{com}. 
. ****Calculate TOTAL MET-min per week*******
. capture drop METmin
{txt}
{com}. order modMETmin, before(vigMETmin)
{txt}
{com}. order walkMETmin, before(modMETmin)
{txt}
{com}. egen METmin = rowtotal(walkMETmin modMETmin vigMETmin)
{txt}
{com}. label var METmin "MET-min per week total exercise" // missing values exist - consider imputation
{txt}
{com}. 
. ////USE METmin as the PA measure, z-scored////
> 
. capture drop PA
{txt}
{com}. egen PA=std(METmin)
{txt}
{com}. 
. save, replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\LIFESTYLENODIET_UKB.dta{rm}
saved
{p_end}

{com}. 
. 
. //STEP 4: GENERATE LIFESTYLE VARIABLES: DIET//
. 
. use "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\SMALLERDATASETUKBfinalized", clear
{txt}
{com}. 
. keep n_eid n_1289_0_0 n_1299_0_0 n_1309_0_0 n_1319_0_0 n_1329_0_0 n_1339_0_0 n_1349_0_0 n_1359_0_0 n_1369_0_0 n_1379_0_0 n_1389_0_0 n_6144_0_0 ///
> n_6144_0_1 n_6144_0_2 n_6144_0_3 n_10855_0_0 n_1408_0_0 n_1418_0_0 n_2654_0_0 n_1428_0_0 n_1438_0_0 n_1448_0_0 n_1458_0_0 n_1468_0_0 ///
> n_1478_0_0 n_1478_0_0 n_1548_0_0  n_6144_0_0
{txt}
{com}. 
. **(ALL ITEMS UNDER THE DIET CATEGORY)
. **URL: https://biobank.ndph.ox.ac.uk/showcase/label.cgi?id=100052
. 
. 
. save "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\LIFESTYLEDIET_UKB",replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\LIFESTYLEDIET_UKB.dta{rm}
saved
{p_end}

{com}. 
. **https://www.ahajournals.org/doi/10.1161/CIRCULATIONAHA.115.018585#d3e341
. 
. 
. **********Recoding as missing data fields and -10 as 0.50***********************
. **-10:<1 --> to 0.5 throughout
. **-3: prefer not to answer
. **-1: do not know
. 
. capture drop n_1289_0_0r n_1299_0_0r n_1309_0_0r n_1319_0_0r n_1329_0_0r n_1339_0_0r n_1349_0_0r n_1359_0_0r n_1369_0_0r n_1379_0_0r n_1389_0_0r 
{txt}
{com}. capture drop n_6144_0_0r n_6144_0_1r n_6144_0_2r n_6144_0_3r n_10855_0_0r n_1408_0_0r n_1418_0_0r n_2654_0_0r n_1438_0_0r n_1448_0_0r n_1458_0_0r 
{txt}
{com}. capture drop n_1468_0_0r n_1478_0_0r n_1478_0_0r
{txt}
{com}. 
. 
. foreach x of varlist n_1289_0_0 n_1299_0_0 n_1309_0_0 n_1319_0_0 n_1329_0_0 n_1339_0_0 n_1349_0_0 n_1359_0_0 n_1369_0_0 n_1379_0_0 n_1389_0_0 n_6144_0_0 n_6144_0_1 n_6144_0_2 n_6144_0_3 n_10855_0_0 n_1408_0_0 n_1418_0_0 n_2654_0_0 n_1428_0_0 n_1438_0_0 n_1448_0_0 n_1458_0_0 n_1468_0_0 n_1478_0_0  {c -(}
{txt}  2{com}.         gen `x'r=`x'
{txt}  3{com}. {c )-}
{txt}(915 missing values generated)
(915 missing values generated)
(915 missing values generated)
(916 missing values generated)
(916 missing values generated)
(916 missing values generated)
(917 missing values generated)
(917 missing values generated)
(917 missing values generated)
(917 missing values generated)
(919 missing values generated)
(4,689 missing values generated)
(488,556 missing values generated)
(498,256 missing values generated)
(501,980 missing values generated)
(498,639 missing values generated)
(12,898 missing values generated)
(1,002 missing values generated)
(242,645 missing values generated)
(4,689 missing values generated)
(4,689 missing values generated)
(21,141 missing values generated)
(1,036 missing values generated)
(87,293 missing values generated)
(919 missing values generated)

{com}. 
. foreach y of varlist n_1289_0_0r n_1299_0_0r n_1309_0_0r n_1319_0_0r n_1329_0_0r n_1339_0_0r n_1349_0_0r n_1359_0_0r n_1369_0_0r n_1379_0_0r n_1389_0_0r n_6144_0_0r n_6144_0_1r n_6144_0_2r n_6144_0_3r n_10855_0_0r n_1408_0_0r n_1418_0_0r n_1428_0_0r n_2654_0_0r n_1438_0_0r n_1448_0_0r n_1458_0_0r n_1468_0_0r n_1478_0_0r n_1478_0_0r {c -(}
{txt}  2{com}. replace `y'=. if `y'==-3 | `y'==-1 | `y'==-5
{txt}  3{com}. {c )-}
{txt}(6,696 real changes made, 6,696 to missing)
(6,952 real changes made, 6,952 to missing)
(2,346 real changes made, 2,346 to missing)
(6,061 real changes made, 6,061 to missing)
(3,185 real changes made, 3,185 to missing)
(2,828 real changes made, 2,828 to missing)
(1,334 real changes made, 1,334 to missing)
(1,177 real changes made, 1,177 to missing)
(2,428 real changes made, 2,428 to missing)
(3,591 real changes made, 3,591 to missing)
(3,397 real changes made, 3,397 to missing)
(1,769 real changes made, 1,769 to missing)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(6 real changes made, 6 to missing)
(1,574 real changes made, 1,574 to missing)
(545 real changes made, 545 to missing)
(1,135 real changes made, 1,135 to missing)
(1,375 real changes made, 1,375 to missing)
(6,120 real changes made, 6,120 to missing)
(1,536 real changes made, 1,536 to missing)
(2,070 real changes made, 2,070 to missing)
(3,171 real changes made, 3,171 to missing)
(228 real changes made, 228 to missing)
(0 real changes made)

{com}. 
. 
. 
. foreach y of varlist n_1289_0_0r n_1299_0_0r n_1309_0_0r n_1319_0_0r n_1329_0_0r n_1339_0_0r n_1349_0_0r n_1359_0_0r n_1369_0_0r n_1379_0_0r n_1389_0_0r  n_6144_0_0r n_6144_0_1r n_6144_0_2r n_6144_0_3r n_10855_0_0r n_1408_0_0r n_1418_0_0r n_2654_0_0r n_1438_0_0r n_1448_0_0r n_1458_0_0r n_1468_0_0r n_1478_0_0r n_1478_0_0r {c -(}
{txt}  2{com}. replace `y'=0.5 if `y'==-10 
{txt}  3{com}. {c )-}
{txt}(10,018 real changes made)
(23,438 real changes made)
(15,876 real changes made)
(39,122 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(5,717 real changes made)
(0 real changes made)
(22,286 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)

{com}. 
. save, replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\LIFESTYLEDIET_UKB.dta{rm}
saved
{p_end}

{com}. 
. 
. /////////////////////FRUITS COMPONENT //////////////////////
> 
. 
. **Servings per day for all fruits**
. 
. **1 piece of dried fruit (e.g. apricot)~=2.5 TBSP, 1 TBSP= 0.063 cups; ½ cup of dried fruit (1 serving) is 3 pieces of dried fruit.
. 
. **1 medium sized fruit is one serving.
. 
. capture drop allfruits
{txt}
{com}. gen allfruits=.
{txt}(502,409 missing values generated)

{com}. replace allfruits=(n_1309_0_0r+(n_1319_0_0r/3))
{txt}(494,332 real changes made)

{com}. 
. **>=3 servings per day**
. 
. 
. capture drop allfruits_component1
{txt}
{com}. gen allfruits_component1=.
{txt}(502,409 missing values generated)

{com}. replace allfruits_component1=1 if allfruits>=3 & allfruits~=.
{txt}(191,995 real changes made)

{com}. replace allfruits_component1=0 if allfruits_component1~=1 & allfruits~=.
{txt}(302,337 real changes made)

{com}. 
. 
. 
. //////////////////////VEGETABLES COMPONENT/////////////////////
> 
. **Servings per day for all vegetables**
. 
. **1 cup of raw leafy vegetables is 16 TBSP. ½ cup of cooked or non-leafy raw vegetables is 8 TBSP. 
. 
. **1 serving of raw leafy/non-leafy vegetables is ~=12 TBSP; 1 serving of cooked vegetables is ~=8 TBSP
. 
. 
. capture drop allvegs
{txt}
{com}. gen allvegs=.
{txt}(502,409 missing values generated)

{com}. replace allvegs=((n_1289_0_0r/8))+((n_1299_0_0r/12))
{txt}(491,439 real changes made)

{com}. 
. **>=3 servings per day**
. 
. capture drop allvegs_component2
{txt}
{com}. gen allvegs_component2=.
{txt}(502,409 missing values generated)

{com}. replace allvegs_component2=1 if allvegs>=3 & allvegs~=.
{txt}(1,006 real changes made)

{com}. replace allvegs_component2=0 if allvegs_component2~=1 & allvegs~=.
{txt}(490,433 real changes made)

{com}. 
. //////////////WHOLE GRAINS///////////////////////////////////
> 
. **Bread intake, slices/week: n_1438_0_0r
. **Type of bread: n_1448_0_0r    
. 
. **1 White
. **2     Brown
. **3     Wholemeal or wholegrain
. **4     Other type of bread
. 
. 
. **Cereal intake, bowls/week: n_1458_0_0r
. 
. 
. **Cereal type:n_1448_0_0r
. 
. **1     Bran cereal (e.g. All Bran, Branflakes)
. **2     Biscuit cereal (e.g. Weetabix)
. **3     Oat cereal (e.g. Ready Brek, porridge)
. **4     Muesli
. **5     Other (e.g. Cornflakes, Frosties)
. 
. capture drop wholegrain_bread
{txt}
{com}. gen wholegrain_bread=.
{txt}(502,409 missing values generated)

{com}. replace wholegrain_bread=n_1438_0_0r if n_1448_0_0r==3
{txt}(269,438 real changes made)

{com}. replace wholegrain_bread=0 if n_1448_0_0r~=3 & n_1438_0_0r~=.
{txt}(222,162 real changes made)

{com}. 
. capture drop wholegrain_bread_day
{txt}
{com}. gen wholegrain_bread_day=.
{txt}(502,409 missing values generated)

{com}. replace wholegrain_bread_day=wholegrain_bread/7 
{txt}(491,600 real changes made)

{com}. 
. capture drop wholegrain_cereal
{txt}
{com}. gen wholegrain_cereal=.
{txt}(502,409 missing values generated)

{com}. replace wholegrain_cereal=n_1458_0_0r if n_1448_0_0r==1 | n_1448_0_0r==2 | n_1448_0_0r==3 | n_1448_0_0r==4
{txt}(477,967 real changes made)

{com}. replace wholegrain_cereal=0 if n_1448_0_0r~=3 & n_1458_0_0r~=.
{txt}(195,871 real changes made)

{com}. 
. capture drop wholegrain_cereal_day
{txt}
{com}. gen wholegrain_cereal_day=.
{txt}(502,409 missing values generated)

{com}. replace wholegrain_cereal_day=wholegrain_cereal/7 
{txt}(499,303 real changes made)

{com}. 
. 
. capture drop wholegrain
{txt}
{com}. gen wholegrain=(wholegrain_bread_day+wholegrain_cereal_day)
{txt}(12,058 missing values generated)

{com}. 
. capture drop wholegrain_component3
{txt}
{com}. gen wholegrain_component3=.
{txt}(502,409 missing values generated)

{com}. replace wholegrain_component3=1 if wholegrain>=3 & wholegrain~=.
{txt}(79,636 real changes made)

{com}. replace wholegrain_component3=0 if wholegrain_component3~=1 & wholegrain~=.
{txt}(410,715 real changes made)

{com}. 
. //////////////FISH/SHELLFISH////////////////////////////////
> 
. **non-oily fish, times/week: n_1329_0_0r
. **oily fish, times/week: n_1339_0_0r
. 
. 
. **0     Never
. **1     Less than once a week
. **2     Once a week
. **3     2-4 times a week
. **4     5-6 times a week
. **5     Once or more daily
. 
. 
. capture drop fish
{txt}
{com}. gen fish=n_1329_0_0r+n_1339_0_0r
{txt}(5,770 missing values generated)

{com}. 
. capture drop fish_component4
{txt}
{com}. gen fish_component4=.
{txt}(502,409 missing values generated)

{com}. replace fish_component4=1 if fish>=3 & fish~=.
{txt}(367,768 real changes made)

{com}. replace fish_component4=0 if fish_component4~=1 & fish~=.
{txt}(128,871 real changes made)

{com}. 
. //////////////DAIRY PRODUCTS///////////////////////////////
> 
. 
. **Never eat eggs, dairy, weat, sugar: n_6144_0_0r
. **1     Eggs or foods containing eggs
. **2     Dairy products
. **3     Wheat products
. **4     Sugar or foods/drinks containing sugar
. **5     I eat all of the above
. 
. **Cheese intake: n_1408_0_0r**
. **0     Never
. **1     Less than once a week
. **2     Once a week
. **3     2-4 times a week
. **4     5-6 times a week
. **5     Once or more daily
. 
. **Milk type used: n_1418_0_0r
. **1     Full cream
. **2     Semi-skimmed
. **3     Skimmed
. **4     Soya
. **5     Other type of milk
. **6     Never/rarely have milk
. 
. 
. capture drop dairy_component5
{txt}
{com}. gen dairy_component5=.
{txt}(502,409 missing values generated)

{com}. replace dairy_component5=1 if n_6144_0_0r~=2 & n_1408_0_0r==5 & n_1418_0_0r~=6 |n_6144_0_1r~=2 & n_1408_0_0r==5 & n_1418_0_0r~=6 |n_6144_0_2r~=2 & n_1408_0_0r==5 & n_1418_0_0r~=6 | n_6144_0_3r~=2 & n_1408_0_0r==5 & n_1418_0_0r~=6
{txt}(16,893 real changes made)

{com}. replace dairy_component5=0 if dairy_component5~=1 & n_6144_0_0r~=. & n_1408_0_0r~=. & n_1418_0_0r~=.
{txt}(465,750 real changes made)

{com}. 
. /////////////VEGETABLE OILS//////////////////////////////
> 
. **Other types of non-butter spreads: n_2654_0_0r**
. 
. **4     Soft (tub) margarine
. **5     Hard (block) margarine
. **6     Olive oil based spread (eg: Bertolli)
. **7     Polyunsaturated/sunflower oil based spread (eg: Flora)
. **2     Flora Pro-Active or Benecol
. **8     Other low or reduced fat spread
. **9     Other type of spread/margarine
. 
. 
. capture drop vegoil_component6
{txt}
{com}. gen vegoil_component6=.
{txt}(502,409 missing values generated)

{com}. replace vegoil_component6=1 if n_2654_0_0r==6 | n_2654_0_0r==7 
{txt}(149,795 real changes made)

{com}. replace vegoil_component6=0 if vegoil_component6~=1 
{txt}(352,614 real changes made)

{com}. 
. 
. ////////////REFINED GRAINS, STARCHES, ADDED SUGARS///////
> 
. **Bread intake, slices/week: n_1438_0_0r
. **Type of bread: n_1448_0_0r    
. 
. **1 White
. **2     Brown
. **3     wholemeal or wholegrain
. **4     Other type of bread
. 
. 
. **Cereal intake, bowls/week: n_1458_0_0r
. 
. 
. **Cereal type:n_1448_0_0r
. 
. **1     Bran cereal (e.g. All Bran, Branflakes)
. **2     Biscuit cereal (e.g. Weetabix)
. **3     Oat cereal (e.g. Ready Brek, porridge)
. **4     Muesli
. **5     Other (e.g. Cornflakes, Frosties)
. 
. capture drop nonwholegrain_bread
{txt}
{com}. gen nonwholegrain_bread=.
{txt}(502,409 missing values generated)

{com}. replace nonwholegrain_bread=n_1438_0_0r if n_1448_0_0r~=3 & n_1448_0_0r~=.
{txt}(204,541 real changes made)

{com}. replace nonwholegrain_bread=0 if n_1448_0_0r==3 & n_1438_0_0r~=.
{txt}(269,438 real changes made)

{com}. 
. capture drop nonwholegrain_bread_day
{txt}
{com}. gen nonwholegrain_bread_day=.
{txt}(502,409 missing values generated)

{com}. replace nonwholegrain_bread_day=nonwholegrain_bread/7 
{txt}(473,979 real changes made)

{com}. 
. capture drop nonwholegrain_cereal
{txt}
{com}. gen nonwholegrain_cereal=.
{txt}(502,409 missing values generated)

{com}. replace nonwholegrain_cereal=n_1458_0_0r if n_1448_0_0r==5 
{txt}(0 real changes made)

{com}. replace nonwholegrain_cereal=0 if n_1448_0_0r~=5 & n_1458_0_0r~=.
{txt}(499,303 real changes made)

{com}. 
. capture drop nonwholegrain_cereal_day
{txt}
{com}. gen nonwholegrain_cereal_day=.
{txt}(502,409 missing values generated)

{com}. replace nonwholegrain_cereal_day=nonwholegrain_cereal/7 
{txt}(499,303 real changes made)

{com}. 
. 
. capture drop nonwholegrain
{txt}
{com}. gen nonwholegrain=nonwholegrain_bread_day+nonwholegrain_cereal_day
{txt}(29,600 missing values generated)

{com}. 
. capture drop nonwholegrain_component7
{txt}
{com}. gen nonwholegrain_component7=.
{txt}(502,409 missing values generated)

{com}. replace nonwholegrain_component7=1 if nonwholegrain<1.5 & nonwholegrain~=.
{txt}(369,473 real changes made)

{com}. replace nonwholegrain_component7=0 if nonwholegrain_component7~=1 & nonwholegrain~=.
{txt}(103,336 real changes made)

{com}. 
. 
. 
. ////////////PROCESSED MEATS/////////////////////////////
> 
. 
. 
. **0     Never
. **1     Less than once a week
. **2     Once a week
. **3     2-4 times a week
. **4     5-6 times a week
. **5     Once or more daily
. 
. capture drop processed_meat
{txt}
{com}. gen processed_meat=n_1349_0_0r
{txt}(2,251 missing values generated)

{com}. 
. capture drop processed_meat_component8
{txt}
{com}. gen processed_meat_component8=.
{txt}(502,409 missing values generated)

{com}. replace processed_meat_component8=1 if processed_meat==0 | processed_meat==1 | processed_meat==2
{txt}(345,090 real changes made)

{com}. replace processed_meat_component8=0 if processed_meat==3 | processed_meat==4 | processed_meat==5
{txt}(155,068 real changes made)

{com}. 
. 
. 
. ///////////UNPROCESSED RED MEATS/////////////////////////////
> 
. **Poultry: n_1359_0_0r: White meat
. **Lamb/mutton: n_1379_0_0r: Red meat
. **Beef:n_1369_0_0r: Red meat
. **Pork:n_1389_0_0r: Red meat
. 
. 
. **0     Never
. **1     Less than once a week
. **2     Once a week
. **3     2-4 times a week
. **4     5-6 times a week
. **5     Once or more daily
. 
. capture drop unprocessed_meats
{txt}
{com}. gen unprocessed_meats=(n_1369_0_0r+n_1379_0_0r+n_1389_0_0r)
{txt}(7,020 missing values generated)

{com}. 
. 
. capture drop unprocessed_meats_component9
{txt}
{com}. gen unprocessed_meats_component9=.
{txt}(502,409 missing values generated)

{com}. replace unprocessed_meats_component9=1 if unprocessed_meats<3 & unprocessed_meats~=.
{txt}(91,413 real changes made)

{com}. replace unprocessed_meats_component9=0 if unprocessed_meats_component9~=1 & unprocessed_meats~=.
{txt}(403,976 real changes made)

{com}. 
. 
. ////////////INDUSTRIAL TRANS FAT////////////////////////////
> 
. **Type of spread: n_1428_0_0r
. 
. **1     Butter/spreadable butter
. **3     Other type of spread/margarine
. **0     Never/rarely use spread
. **2     Flora Pro-Active/Benecol
. 
. **Non-butter spread type details: n_2654_0_0r
. 
. **4     Soft (tub) margarine
. **5     Hard (block) margarine
. **6     Olive oil based spread (eg: Bertolli)
. **7     Polyunsaturated/sunflower oil based spread (eg: Flora)
. **2     Flora Pro-Active or Benecol
. **8     Other low or reduced fat spread
. **9     Other type of spread/margarine
. 
. capture drop transfat_component10
{txt}
{com}. gen transfat_component10=.
{txt}(502,409 missing values generated)

{com}. replace transfat_component10=1 if n_1428_0_0r==0
{txt}(53,937 real changes made)

{com}. replace transfat_component10=0 if transfat_component10~=1 & n_1428_0_0r~=.
{txt}(442,648 real changes made)

{com}. 
. 
. ////////////SUGAR SWEETENDED BEVERAGES/////////////////////
> 
. **Never eat eggs, dairy, wheat, sugar: n_6144_0_0r
. **1     Eggs or foods containing eggs
. **2     Dairy products
. **3     Wheat products
. **4     Sugar or foods/drinks containing sugar
. **5     I eat all of the above
. 
. capture drop sugar_bev_component11
{txt}
{com}. gen sugar_bev_component11=.
{txt}(502,409 missing values generated)

{com}. replace sugar_bev_component11=0 if n_6144_0_0r==4 & n_6144_0_0r~=. | n_6144_0_0r==4 & n_6144_0_1r~=. | n_6144_0_0r==4 & n_6144_0_2r~=. | n_6144_0_0r==4 & n_6144_0_3r~=.
{txt}(82,968 real changes made)

{com}. replace sugar_bev_component11=1 if sugar_bev_component11~=0 & n_6144_0_0r~=.
{txt}(412,983 real changes made)

{com}. 
. 
. ////////////SODIUM////////////////////////////////////////
> 
. **Salt added to food: n_1478_0_0r
. **1     Never/rarely
. **2     Sometimes
. **3     Usually
. **4     Always
. 
. 
. capture drop sodium_component12
{txt}
{com}. gen sodium_component12=.
{txt}(502,409 missing values generated)

{com}. replace sodium_component12=1 if n_1478_0_0r==1 | n_1478_0_0r==2
{txt}(418,458 real changes made)

{com}. replace sodium_component12=0 if sodium_component12~=1 & n_1478_0_0r~=.
{txt}(82,804 real changes made)

{com}. 
. //////////HDI_TOTALSCORE//////////////////
> 
. capture drop rowmissHDI
{txt}
{com}. egen rowmissHDI=rowmiss(allfruits_component1 allvegs_component2 wholegrain_component3 fish_component4 dairy_component5 vegoil_component6 nonwholegrain_component7 processed_meat_component8 unprocessed_meats_component9 transfat_component10 sugar_bev_component11 sodium_component12)
{txt}
{com}. 
. tab rowmissHDI

 {txt}rowmissHDI {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}    444,245       88.42       88.42
{txt}          1 {c |}{res}     38,523        7.67       96.09
{txt}          2 {c |}{res}      9,545        1.90       97.99
{txt}          3 {c |}{res}      2,730        0.54       98.53
{txt}          4 {c |}{res}      1,422        0.28       98.82
{txt}          5 {c |}{res}      4,101        0.82       99.63
{txt}          6 {c |}{res}        420        0.08       99.72
{txt}          7 {c |}{res}        203        0.04       99.76
{txt}          8 {c |}{res}         95        0.02       99.78
{txt}          9 {c |}{res}         57        0.01       99.79
{txt}         10 {c |}{res}         17        0.00       99.79
{txt}         11 {c |}{res}      1,051        0.21      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    502,409      100.00
{txt}
{com}. 
. 
. capture drop HDI_TOTALSCORE
{txt}
{com}. egen HDI_TOTALSCORE=rowmean(allfruits_component1 allvegs_component2 wholegrain_component3 fish_component4 dairy_component5 vegoil_component6 nonwholegrain_component7 processed_meat_component8 unprocessed_meats_component9 transfat_component10 sugar_bev_component11 sodium_component12) if rowmissHDI<=6
{txt}(1,423 missing values generated)

{com}. 
. replace HDI_TOTALSCORE=HDI_TOTALSCORE*12 
{txt}(500,745 real changes made)

{com}. 
. ////////////////////
> 
. ///////////////////RECODING FOR VARIATION IN DIET///////////////
> 
. 
. **Coding        Meaning
. **1     Never/rarely
. **2     Sometimes
. **3     Often
. **-1    Do not know
. **-3    Prefer not to answer
. 
. capture drop DIET_VARIATION
{txt}
{com}. gen DIET_VARIATION=.
{txt}(502,409 missing values generated)

{com}. replace DIET_VARIATION=1 if n_1548_0_0==1
{txt}(170,396 real changes made)

{com}. replace DIET_VARIATION=2 if n_1548_0_0==2
{txt}(284,895 real changes made)

{com}. replace DIET_VARIATION=3 if n_1548_0_0==3
{txt}(39,907 real changes made)

{com}. replace DIET_VARIATION=. if n_1548_0_0==-1
{txt}(0 real changes made)

{com}. replace DIET_VARIATION=. if n_1548_0_0==-3
{txt}(0 real changes made)

{com}. 
. 
. ////////////DIET z-score///////////////
> 
. capture drop zHDI_TOTALSCORE
{txt}
{com}. egen zHDI_TOTALSCORE=std(HDI_TOTALSCORE)
{txt}(1,423 missing values generated)

{com}. 
. capture drop zDIET_VARIATION
{txt}
{com}. egen zDIET_VARIATION=std(DIET_VARIATION)
{txt}(7,211 missing values generated)

{com}. 
. 
. capture drop DIET
{txt}
{com}. gen DIET=zHDI_TOTALSCORE
{txt}(1,423 missing values generated)

{com}. 
. save, replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\LIFESTYLEDIET_UKB.dta{rm}
saved
{p_end}

{com}. 
. 
. //STEP 5: GENERATE LIFESTYLE VARIABLES: NUTR//
. 
. 
. use "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\SMALLERDATASETUKBfin", clear
{txt}
{com}. 
. keep n_eid n_30890_0_0 n_30070_0_0
{txt}
{com}. 
. save "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\NUTR_UKB",replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\NUTR_UKB.dta{rm}
saved
{p_end}

{com}. 
. label var n_30890_0_0 "Vitamin D"
{txt}
{com}. label var n_30070_0_0 "Red blood cell (erythrocyte) distribution width"
{txt}
{com}. 
. 
. pwcorr n_30890_0_0 n_30070_0_0, sig

             {txt}{c |} n_3089~0 n_3007~0
{hline 13}{c +}{hline 18}
 n_30890_0_0 {c |} {res}  1.0000 
             {txt}{c |}
             {c |}
 n_30070_0_0 {c |} {res} -0.0455   1.0000 
             {txt}{c |}{res}   0.0000
             {txt}{c |}

{com}. 
. capture drop vitamind
{txt}
{com}. gen vitamind= n_30890_0_0 
{txt}(54,163 missing values generated)

{com}. 
. 
. capture drop rdw
{txt}
{com}. gen rdw=n_30070_0_0 
{txt}(24,349 missing values generated)

{com}. 
. capture drop zvitamind
{txt}
{com}. egen zvitamind=std(vitamind)
{txt}(54,163 missing values generated)

{com}. 
. capture drop zrdw
{txt}
{com}. egen zrdw=std(rdw)
{txt}(24,349 missing values generated)

{com}. 
. capture drop zrdwinv
{txt}
{com}. gen zrdwinv=zrdw*-1
{txt}(24,349 missing values generated)

{com}. 
. capture drop rowmissNUTR
{txt}
{com}. egen rowmissNUTR=rowmiss(zvitamind zrdwinv)
{txt}
{com}. 
. tab rowmissNUTR

{txt}rowmissNUTR {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}    436,793       86.94       86.94
{txt}          1 {c |}{res}     52,720       10.49       97.43
{txt}          2 {c |}{res}     12,896        2.57      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    502,409      100.00
{txt}
{com}. 
. capture drop NUTR
{txt}
{com}. egen NUTR=rmean(zvitamind zrdwinv) if rowmissNUTR<=1
{txt}(12,896 missing values generated)

{com}. 
. save, replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\NUTR_UKB.dta{rm}
saved
{p_end}

{com}. 
. 
. //STEP 6: GENERATE LIFESTYLE VARIABLES: SS//
. 
. use "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\SMALLERDATASETUKBfinalized", clear
{txt}
{com}. 
. keep n_eid n_1031_0_0 n_6160_0_* n_2110_0_0
{txt}
{com}. 
. save "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\SS_UKB",replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\SS_UKB.dta{rm}
saved
{p_end}

{com}. 
. 
. //////////SOCIAL SUPPORT VARIABLE 1/////
> 
. **Frequency of friend/family visits**
. **https://biobank.ctsu.ox.ac.uk/crystal/field.cgi?id=1031
. 
. **WP11 How often do you visit friends or family
. **or have them visit you?
. **SELECT one of 9 from
. **1 : Almost daily
. **2 : 2-4 times a week
. **3 : About once a week
. **4 : About once a month
. **5 : Once every few months
. **6 : Never or almost never
. **7 : No friends/family
. **outside household
. **-1 : Do not know
. **-3 : Prefer not to answer
. **Goto WP12 If this varies, please give an average of
. **how often you visit or have had visits in
. **the last year. Include meeting with
. **friends or family in environments
. **outside of the home such as in the park,
. **at a sports field, at a restaurant or pub.
. 
. capture drop SS_friendsfamily
{txt}
{com}. gen SS_friendsfamily=.
{txt}(502,409 missing values generated)

{com}. replace SS_friendsfamily=n_1031_0_0
{txt}(497,735 real changes made)

{com}. replace SS_friendsfamily=. if n_1031_0_0==-1
{txt}(1,715 real changes made, 1,715 to missing)

{com}. replace SS_friendsfamily=. if n_1031_0_0==-3
{txt}(1,563 real changes made, 1,563 to missing)

{com}. recode SS_friendsfamily (1=7) (2=6) (3=5) (4=4) (5=3) (6=2) (7=1)
{txt}(427,982 changes made to {bf:SS_friendsfamily})

{com}. 
. 
. ///SOCIAL SUPPORT VARIABLE 2/////
> **https://biobank.ctsu.ox.ac.uk/crystal/field.cgi?id=6160
. 
. **WP12 Which of the following do you attend once
. **a week or more often?
. **(You can select more than one)
. **TOGGLE of 7 choices
. **1 : Sports club or gym
. **2 : Pub or social club
. **3 : Religious group
. **4 : Adult education class
. **5 : Other group activity
. **-7 : None of the above
. **-3 : Prefer not to answer
. **Require ≥1
. **choices
. **-7 : is exclusive
. **-3 : is exclusive
. **Goto WP12A If this varies, please think about
. **activities in the last year.
. 
. 
. capture drop SS_leisuresocial1
{txt}
{com}. gen SS_leisuresocial1=.
{txt}(502,409 missing values generated)

{com}. replace SS_leisuresocial1=1 if n_6160_0_0~=. & n_6160_0_0~=-7 & n_6160_0_0~=-3
{txt}(347,464 real changes made)

{com}. replace SS_leisuresocial1=0 if SS_leisuresocial1~=1 & n_6160_0_0~=-7 & n_6160_0_0~=-3
{txt}(904 real changes made)

{com}. 
. 
. capture drop SS_leisuresocial2
{txt}
{com}. gen SS_leisuresocial2=.
{txt}(502,409 missing values generated)

{com}. replace SS_leisuresocial2=1 if n_6160_0_1~=. & n_6160_0_1~=-7 & n_6160_0_1~=-3
{txt}(128,849 real changes made)

{com}. replace SS_leisuresocial2=0 if SS_leisuresocial2~=1 & n_6160_0_1~=-7 & n_6160_0_1~=-3
{txt}(373,560 real changes made)

{com}. 
. 
. capture drop SS_leisuresocial3
{txt}
{com}. gen SS_leisuresocial3=.
{txt}(502,409 missing values generated)

{com}. replace SS_leisuresocial3=1 if n_6160_0_2~=. & n_6160_0_2~=-7 & n_6160_0_2~=-3
{txt}(24,425 real changes made)

{com}. replace SS_leisuresocial3=0 if SS_leisuresocial3~=1 & n_6160_0_2~=-7 & n_6160_0_2~=-3
{txt}(477,984 real changes made)

{com}. 
. 
. capture drop SS_leisuresocial4
{txt}
{com}. gen SS_leisuresocial4=.
{txt}(502,409 missing values generated)

{com}. replace SS_leisuresocial4=1 if n_6160_0_3~=. & n_6160_0_3~=-7 & n_6160_0_3~=-3
{txt}(2,359 real changes made)

{com}. replace SS_leisuresocial4=0 if SS_leisuresocial4~=1 & n_6160_0_3~=-7 & n_6160_0_3~=-3
{txt}(500,050 real changes made)

{com}. 
. 
. capture drop SS_leisuresocial5
{txt}
{com}. gen SS_leisuresocial5=.
{txt}(502,409 missing values generated)

{com}. replace SS_leisuresocial5=1 if n_6160_0_4~=. & n_6160_0_4~=-7 & n_6160_0_4~=-3
{txt}(128 real changes made)

{com}. replace SS_leisuresocial5=0 if SS_leisuresocial5~=1 & n_6160_0_4~=-7 & n_6160_0_4~=-3
{txt}(502,281 real changes made)

{com}. 
. capture drop rowmissSS1
{txt}
{com}. egen rowmissSS1=rowmiss(SS_leisuresocial1 SS_leisuresocial2 SS_leisuresocial3 SS_leisuresocial4 SS_leisuresocial5)
{txt}
{com}. 
. tab rowmissSS1

 {txt}rowmissSS1 {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}    348,368       69.34       69.34
{txt}          1 {c |}{res}    154,041       30.66      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    502,409      100.00
{txt}
{com}. 
. capture drop SS_leisuresocial
{txt}
{com}. egen SS_leisuresocial=rmean(SS_leisuresocial1 SS_leisuresocial2 SS_leisuresocial3 SS_leisuresocial4 SS_leisuresocial5) if rowmissSS1<=5
{txt}
{com}. 
. replace SS_leisuresocial=SS_leisuresocial*5
{txt}(347,464 real changes made)

{com}. 
. save, replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\SS_UKB.dta{rm}
saved
{p_end}

{com}. 
. 
. **SOCIAL SUPPORT VARIABLE 3**
. **https://biobank.ctsu.ox.ac.uk/crystal/field.cgi?id=2110
. 
. **E1 How often are you able to confide in
. **someone close to you?
. **SELECT one of 8 from
. **5 : Almost daily
. **4 : 2-4 times a week
. **3 : About once a week
. **2 : About once a month
. **1 : Once every few months
. **0 : Never or almost never
. **-1 : Do not know
. **-3 : Prefer not to answer
. 
. 
. capture drop SS_abilityconfide
{txt}
{com}. gen SS_abilityconfide=.
{txt}(502,409 missing values generated)

{com}. replace SS_abilityconfide=n_2110_0_0
{txt}(501,475 real changes made)

{com}. replace SS_abilityconfide=. if n_2110_0_0==-1 | n_2110_0_0==-3
{txt}(17,959 real changes made, 17,959 to missing)

{com}. 
. 
. save, replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\SS_UKB.dta{rm}
saved
{p_end}

{com}. 
. capture drop zSS_friendsfamily
{txt}
{com}. egen zSS_friendsfamily=std(SS_friendsfamily)
{txt}(7,952 missing values generated)

{com}. 
. capture drop zSS_leisuresocial
{txt}
{com}. egen zSS_leisuresocial=std(SS_leisuresocial)
{txt}
{com}. 
. capture drop zSS_abilityconfide
{txt}
{com}. egen zSS_abilityconfide=std(SS_abilityconfide)
{txt}(18,893 missing values generated)

{com}. 
. 
. capture drop rowmissSS
{txt}
{com}. egen rowmissSS=rowmiss(zSS_friendsfamily zSS_leisuresocial zSS_abilityconfide)
{txt}
{com}. 
. tab rowmissSS

  {txt}rowmissSS {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}    477,633       95.07       95.07
{txt}          1 {c |}{res}     22,707        4.52       99.59
{txt}          2 {c |}{res}      2,069        0.41      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    502,409      100.00
{txt}
{com}. 
. 
. 
. capture drop SS
{txt}
{com}. egen SS=rmean(zSS_friendsfamily zSS_leisuresocial zSS_abilityconfide) if rowmissSS<=1
{txt}(2,069 missing values generated)

{com}. 
. 
. save, replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\SS_UKB.dta{rm}
saved
{p_end}

{com}. 
. //STEP 7: GENERATE HEALTH VARIABLES//
. 
. use "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\SMALLERDATASETUKBfinalized", clear
{txt}
{com}. 
. keep n_eid n_135_0_0 n_134_0_0 n_2178_0_0 n_21001_0_0 n_21001_0_0 n_48_0_0 n_49_0_0 n_30600_0_0 n_30710_0_0 n_30690_0_0 n_30760_0_0 n_30750_0_0 n_102_0_0 n_4080_0_0 n_4079_0_0 n_31_0_0 n_2443_0_0 n_1160_0_0
{txt}
{com}. 
. save "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\HEALTH_UKB",replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\HEALTH_UKB.dta{rm}
saved
{p_end}

{com}. 
. capture drop sex
{txt}
{com}. gen sex=n_31_0_0 
{txt}(20 missing values generated)

{com}. recode sex 0=2 1=1
{txt}(273,312 changes made to {bf:sex})

{com}. 
. 
. ********************CO-MORBIDITY INDEX**********
. 
. **NUMBER OF SELF-REPORTED NON-CANCER ILLNESSES:***
. 
. **https://biobank.ctsu.ox.ac.uk/crystal/field.cgi?id=135
. 
. capture drop comorbid_noncancer
{txt}
{com}. gen comorbid_noncancer=.
{txt}(502,409 missing values generated)

{com}. replace comorbid_noncancer=n_135_0_0
{txt}(501,526 real changes made)

{com}. 
. 
. ***NUMBER OF SELF-REPORTED CANCERS*****
. 
. **https://biobank.ctsu.ox.ac.uk/crystal/field.cgi?id=134
. 
. capture drop comorbid_cancer
{txt}
{com}. gen comorbid_cancer=.
{txt}(502,409 missing values generated)

{com}. replace comorbid_cancer=n_134_0_0
{txt}(501,526 real changes made)

{com}. 
. **NUMBER OF CO-MORBIDITIES**
. 
. capture drop comorbid
{txt}
{com}. gen comorbid=comorbid_noncancer+comorbid_cancer
{txt}(883 missing values generated)

{com}. 
. 
. ***********SELF-RATED HEALTH***************
. **https://biobank.ctsu.ox.ac.uk/crystal/field.cgi?id=2178
. 
. capture drop srh
{txt}
{com}. gen srh=n_2178_0_0
{txt}(940 missing values generated)

{com}. 
. capture drop srhbr
{txt}
{com}. gen srhbr=.
{txt}(502,409 missing values generated)

{com}. replace srhbr=srh if srh~=-1 & srh~=-3
{txt}(498,901 real changes made)

{com}. 
. 
. 
. ***********BODY MASS INDEX****************
. **https://biobank.ctsu.ox.ac.uk/crystal/field.cgi?id=23104
. 
. capture drop bmi
{txt}
{com}. gen bmi=n_21001_0_0 
{txt}(3,127 missing values generated)

{com}. label var bmi "body mass index kg/m^2" //missing values exist - consider imputation
{txt}
{com}. 
. 
. 
. 
. ***********ALLOSTATIC LOAD****************
. 
. ***WAIST TO HIP RATIO***
. **https://biobank.ctsu.ox.ac.uk/crystal/search.cgi?wot=0&srch=waist+circumference&sta0=on&sta1=on&sta2=on&sta3=on&str0=on&str3=on&fit0=on&fit10=on&fit20=on&fit30=on&fvt11=on&fvt21=on&fvt22=on&fvt31=on&fvt41=on&fvt51=on&fvt61=on&fvt101=on&yfirst=2000&ylast=2021
. 
. su n_48_0_0 n_49_0_0, det

                     {txt}Waist circumference
{hline 61}
      Percentiles      Smallest
 1%    {res}       64             20
{txt} 5%    {res}       70             20
{txt}10%    {res}       73             20       {txt}Obs         {res}    500,226
{txt}25%    {res}       80             32       {txt}Sum of wgt. {res}    500,226

{txt}50%    {res}       90                      {txt}Mean          {res} 90.31136
                        {txt}Largest       Std. dev.     {res} 13.48567
{txt}75%    {res}       99            175
{txt}90%    {res}      108            176       {txt}Variance      {res} 181.8632
{txt}95%    {res}      113            182       {txt}Skewness      {res} .4305904
{txt}99%    {res}      126            197       {txt}Kurtosis      {res} 3.333879

                      {txt}Hip circumference
{hline 61}
      Percentiles      Smallest
 1%    {res}       86             30
{txt} 5%    {res}       91             30
{txt}10%    {res}       93             30       {txt}Obs         {res}    500,167
{txt}25%    {res}       97             30       {txt}Sum of wgt. {res}    500,167

{txt}50%    {res}      102                      {txt}Mean          {res} 103.4017
                        {txt}Largest       Std. dev.     {res} 9.249127
{txt}75%    {res}      108            179
{txt}90%    {res}      115            183       {txt}Variance      {res} 85.54634
{txt}95%    {res}      120            186       {txt}Skewness      {res} 1.106731
{txt}99%    {res}      133            195       {txt}Kurtosis      {res} 6.114941
{txt}
{com}. 
. capture drop waist
{txt}
{com}. gen waist=n_48_0_0
{txt}(2,183 missing values generated)

{com}. label var waist "waist circumference cm" //missing values exist - consider imputation
{txt}
{com}. 
. capture drop hip
{txt}
{com}. gen hip=n_49_0_0
{txt}(2,242 missing values generated)

{com}. label var hip "hip circumference cm" //missing values exist - consider imputation
{txt}
{com}. 
. capture drop waisthipratio
{txt}
{com}. gen waisthipratio=waist/hip
{txt}(2,288 missing values generated)

{com}. label var waisthipratio "waist-hip ratio" //missing values exist - consider imputation
{txt}
{com}. 
. capture drop whr_high
{txt}
{com}. gen whr_high=.
{txt}(502,409 missing values generated)

{com}. replace whr_high=1 if waisthipratio>0.90 & waisthipratio~=. & sex==1 | waisthipratio>0.85 & waisthipratio~=. & sex==2
{txt}(246,494 real changes made)

{com}. replace whr_high=0 if whr_high~=1 & waisthipratio~=. 
{txt}(253,627 real changes made)

{com}. 
. label var whr_high "elevated, sex-specific waist-hip ratio: 0.90 for men, 0.85 for women"
{txt}
{com}. 
. tab whr_high 

  {txt}elevated, {c |}
sex-specifi {c |}
c waist-hip {c |}
ratio: 0.90 {c |}
   for men, {c |}
   0.85 for {c |}
      women {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}    253,627       50.71       50.71
{txt}          1 {c |}{res}    246,494       49.29      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    500,121      100.00
{txt}
{com}. 
. **LOW SERUM ALBUMIN, <38 g/L**
. **https://biobank.ctsu.ox.ac.uk/crystal/field.cgi?id=30600**
. 
. su n_30600_0_0, det

                           {txt}Albumin
{hline 61}
      Percentiles      Smallest
 1%    {res}    39.01          17.38
{txt} 5%    {res}    40.98          18.87
{txt}10%    {res}    41.93          20.65       {txt}Obs         {res}    429,978
{txt}25%    {res}    43.49          20.67       {txt}Sum of wgt. {res}    429,978

{txt}50%    {res}     45.2                      {txt}Mean          {res} 45.21004
                        {txt}Largest       Std. dev.     {res}  2.62908
{txt}75%    {res}    46.92          59.07
{txt}90%    {res}    48.53           59.2       {txt}Variance      {res} 6.912061
{txt}95%    {res}    49.52          59.46       {txt}Skewness      {res}-.0358171
{txt}99%    {res}    51.51           59.8       {txt}Kurtosis      {res} 3.712564
{txt}
{com}. 
. capture drop albumin_low
{txt}
{com}. gen albumin_low=.
{txt}(502,409 missing values generated)

{com}. replace albumin_low=1 if n_30600_0_0<38 & n_30600_0_0~=.
{txt}(1,967 real changes made)

{com}. replace albumin_low=0 if albumin_low~=1 & n_30600_0_0~=. 
{txt}(428,011 real changes made)

{com}. label var albumin_low "low serum albumin, <38 g/l"
{txt}
{com}. 
. tab albumin_low

  {txt}low serum {c |}
   albumin, {c |}
    <38 g/l {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}    428,011       99.54       99.54
{txt}          1 {c |}{res}      1,967        0.46      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    429,978      100.00
{txt}
{com}. 
. **HIGH CRP, >=3 mg/dL**
. **https://biobank.ctsu.ox.ac.uk/crystal/field.cgi?id=30710
. 
. su n_30710_0_0,det

                     {txt}C-reactive protein
{hline 61}
      Percentiles      Smallest
 1%    {res}      .16            .08
{txt} 5%    {res}      .26            .08
{txt}10%    {res}      .36            .08       {txt}Obs         {res}    468,460
{txt}25%    {res}      .66            .08       {txt}Sum of wgt. {res}    468,460

{txt}50%    {res}     1.33                      {txt}Mean          {res} 2.598718
                        {txt}Largest       Std. dev.     {res} 4.360806
{txt}75%    {res}     2.76          79.44
{txt}90%    {res}     5.54          79.49       {txt}Variance      {res} 19.01663
{txt}95%    {res}     8.86          79.95       {txt}Skewness      {res}  6.28943
{txt}99%    {res}    21.22          79.96       {txt}Kurtosis      {res} 64.39774
{txt}
{com}. 
. capture drop crp_high
{txt}
{com}. gen crp_high=. 
{txt}(502,409 missing values generated)

{com}. replace crp_high=1 if n_30710_0_0>=3 & n_30710_0_0~=.
{txt}(106,720 real changes made)

{com}. replace crp_high=0 if crp_high~=1 & n_30710_0_0~=. 
{txt}(361,740 real changes made)

{com}. label var crp_high "elevated C-reactive protein, >=3 g/l"
{txt}
{com}. 
. tab crp_high

   {txt}elevated {c |}
 C-reactive {c |}
   protein, {c |}
    >=3 g/l {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}    361,740       77.22       77.22
{txt}          1 {c |}{res}    106,720       22.78      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    468,460      100.00
{txt}
{com}. 
. 
. **ELEVATED TC, >=240 mg/dL: divide by 38.67 to get mmol/L: >=6.21 mmol/L
. 
. **https://biobank.ctsu.ox.ac.uk/crystal/field.cgi?id=30690,det
. **https://www.omnicalculator.com/health/cholesterol-units
. 
. su n_30690_0_0, det

                         {txt}Cholesterol
{hline 61}
      Percentiles      Smallest
 1%    {res}    3.223           .601
{txt} 5%    {res}    3.888          1.432
{txt}10%    {res}    4.263          1.498       {txt}Obs         {res}    469,481
{txt}25%    {res}    4.906          1.551       {txt}Sum of wgt. {res}    469,481

{txt}50%    {res}     5.65                      {txt}Mean          {res} 5.692449
                        {txt}Largest       Std. dev.     {res} 1.144948
{txt}75%    {res}    6.424          13.53
{txt}90%    {res}    7.165         13.615       {txt}Variance      {res} 1.310906
{txt}95%    {res}     7.64         13.719       {txt}Skewness      {res} .2856572
{txt}99%    {res}    8.606          15.46       {txt}Kurtosis      {res} 3.338082
{txt}
{com}. 
. capture drop tc_high
{txt}
{com}. gen tc_high=.
{txt}(502,409 missing values generated)

{com}. replace tc_high=1 if n_30690_0_0>=6.21 & n_30690_0_0~=. 
{txt}(146,340 real changes made)

{com}. replace tc_high=0 if tc_high~=1 & n_30690_0_0~=. 
{txt}(323,141 real changes made)

{com}. label var tc_high "elevated total cholesterol, >=6.21 mmol/L"
{txt}
{com}. 
. 
. tab tc_high

   {txt}elevated {c |}
      total {c |}
cholesterol {c |}
   , >=6.21 {c |}
     mmol/L {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}    323,141       68.83       68.83
{txt}          1 {c |}{res}    146,340       31.17      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    469,481      100.00
{txt}
{com}. 
. **LOW HDL-C, <40 mg/dL: divide by 38.67 to get mmol/L: <1.034 mmol/L**
. **https://biobank.ctsu.ox.ac.uk/crystal/field.cgi?id=30760
. **https://www.omnicalculator.com/health/cholesterol-units
. 
. su n_30760_0_0, det

                       {txt}HDL cholesterol
{hline 61}
      Percentiles      Smallest
 1%    {res}     .775           .219
{txt} 5%    {res}     .917           .226
{txt}10%    {res}    1.003           .228       {txt}Obs         {res}    429,774
{txt}25%    {res}     1.17           .252       {txt}Sum of wgt. {res}    429,774

{txt}50%    {res}    1.398                      {txt}Mean          {res} 1.448002
                        {txt}Largest       Std. dev.     {res} .3823061
{txt}75%    {res}    1.674          4.107
{txt}90%    {res}     1.96          4.129       {txt}Variance      {res}  .146158
{txt}95%    {res}    2.147          4.186       {txt}Skewness      {res} .7756026
{txt}99%    {res}    2.539          4.401       {txt}Kurtosis      {res} 3.958405
{txt}
{com}. 
. 
. capture drop hdl_low
{txt}
{com}. gen hdl_low=.
{txt}(502,409 missing values generated)

{com}. replace hdl_low=1 if n_30760_0_0<1.034 & n_30760_0_0~=.
{txt}(52,644 real changes made)

{com}. replace hdl_low=0 if hdl_low~=1 & n_30760_0_0~=.
{txt}(377,130 real changes made)

{com}. label var hdl_low "low HDL-C, <1.034 mmol/L"
{txt}
{com}. 
. tab hdl_low

 {txt}low HDL-C, {c |}
     <1.034 {c |}
     mmol/L {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}    377,130       87.75       87.75
{txt}          1 {c |}{res}     52,644       12.25      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    429,774      100.00
{txt}
{com}. 
. 
. 
. **Glycated hemoglobin, % change to mmol/mol:  cutoff in % is 6.4% --> 46 mmol/mol
. **https://www.hba1cnet.com/hba1c-calculator/
. **https://biobank.ctsu.ox.ac.uk/crystal/field.cgi?id=30750
. 
. su n_30750_0_0,det

                {txt}Glycated haemoglobin (HbA1c)
{hline 61}
      Percentiles      Smallest
 1%    {res}       26             15
{txt} 5%    {res}     29.1           15.3
{txt}10%    {res}     30.5           15.3       {txt}Obs         {res}    466,394
{txt}25%    {res}     32.8           15.3       {txt}Sum of wgt. {res}    466,394

{txt}50%    {res}     35.2                      {txt}Mean          {res} 36.13129
                        {txt}Largest       Std. dev.     {res} 6.775722
{txt}75%    {res}     37.9          265.6
{txt}90%    {res}     41.1          266.3       {txt}Variance      {res}  45.9104
{txt}95%    {res}     45.1          296.1       {txt}Skewness      {res} 4.895931
{txt}99%    {res}     64.7          515.2       {txt}Kurtosis      {res} 95.77651
{txt}
{com}. 
. capture drop ghp_high
{txt}
{com}. gen ghp_high=.
{txt}(502,409 missing values generated)

{com}. replace ghp_high=1 if n_30750_0_0>=46 & n_30750_0_0~=. 
{txt}(21,315 real changes made)

{com}. replace ghp_high=0 if ghp_high~=1 & n_30750_0_0~=. 
{txt}(445,079 real changes made)

{com}. label var ghp_high "High glycated hemoglobin A1c, >=46 mmol/mol"
{txt}
{com}. 
. 
. tab ghp_high

       {txt}High {c |}
   glycated {c |}
 hemoglobin {c |}
  A1c, >=46 {c |}
   mmol/mol {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}    445,079       95.43       95.43
{txt}          1 {c |}{res}     21,315        4.57      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    466,394      100.00
{txt}
{com}. 
. 
. **PULSE RATE, automated reading, beats/min:
. **https://biobank.ctsu.ox.ac.uk/crystal/field.cgi?id=102
. 
. 
. su n_102_0_0,det

                {txt}Pulse rate, automated reading
{hline 61}
      Percentiles      Smallest
 1%    {res}       47             30
{txt} 5%    {res}       53             30
{txt}10%    {res}       56             30       {txt}Obs         {res}    467,962
{txt}25%    {res}       62             30       {txt}Sum of wgt. {res}    467,962

{txt}50%    {res}       68                      {txt}Mean          {res} 69.59784
                        {txt}Largest       Std. dev.     {res} 11.66037
{txt}75%    {res}       76            169
{txt}90%    {res}       85            172       {txt}Variance      {res} 135.9642
{txt}95%    {res}       90            174       {txt}Skewness      {res} .6441475
{txt}99%    {res}      102            174       {txt}Kurtosis      {res} 4.065121
{txt}
{com}. 
. capture drop rhr_high
{txt}
{com}. gen rhr_high=.
{txt}(502,409 missing values generated)

{com}. replace rhr_high=1 if n_102_0_0>=90 & n_102_0_0~=.
{txt}(26,500 real changes made)

{com}. replace rhr_high=0 if rhr_high~=1 & n_102_0_0~=.
{txt}(441,462 real changes made)

{com}. label var rhr_high "Resting pulse rate, >=90 beats/min"
{txt}
{com}. 
. tab rhr_high

    {txt}Resting {c |}
pulse rate, {c |}
       >=90 {c |}
  beats/min {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}    441,462       94.34       94.34
{txt}          1 {c |}{res}     26,500        5.66      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    467,962      100.00
{txt}
{com}. 
. **Blood pressure, automated reading:
. 
. **Systolic blood pressure, automated reading, mm Hg, >=140 mm Hg: 
. **https://biobank.ctsu.ox.ac.uk/crystal/field.cgi?id=4080
. 
. su n_4080_0_0,det

         {txt}Systolic blood pressure, automated reading
{hline 61}
      Percentiles      Smallest
 1%    {res}      101             62
{txt} 5%    {res}      110             68
{txt}10%    {res}      116             69       {txt}Obs         {res}    467,949
{txt}25%    {res}      126             69       {txt}Sum of wgt. {res}    467,949

{txt}50%    {res}      138                      {txt}Mean          {res} 139.7411
                        {txt}Largest       Std. dev.     {res} 19.69681
{txt}75%    {res}      152            254
{txt}90%    {res}      166            260       {txt}Variance      {res} 387.9642
{txt}95%    {res}      175            264       {txt}Skewness      {res} .4963807
{txt}99%    {res}      192            268       {txt}Kurtosis      {res} 3.396021
{txt}
{com}. 
. capture drop sbp_high
{txt}
{com}. gen sbp_high=.
{txt}(502,409 missing values generated)

{com}. replace sbp_high=1 if n_4080_0_0>=140 & n_4080_0_0~=.
{txt}(221,082 real changes made)

{com}. replace sbp_high=0 if sbp_high~=1 & n_4080_0_0~=.
{txt}(246,867 real changes made)

{com}. label var sbp_high "Systolic blood pressure >=140 mm Hg"
{txt}
{com}. 
. tab sbp_high

   {txt}Systolic {c |}
      blood {c |}
   pressure {c |}
>=140 mm Hg {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}    246,867       52.76       52.76
{txt}          1 {c |}{res}    221,082       47.24      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    467,949      100.00
{txt}
{com}. 
. 
. **Diastolic blood pressure, automated reading, mm Hg, >=90 mm Hg: 
. **https://biobank.ctsu.ox.ac.uk/crystal/field.cgi?id=4079
. 
. su n_4079_0_0,det

         {txt}Diastolic blood pressure, automated reading
{hline 61}
      Percentiles      Smallest
 1%    {res}       59             32
{txt} 5%    {res}       65             35
{txt}10%    {res}       69             35       {txt}Obs         {res}    467,962
{txt}25%    {res}       75             38       {txt}Sum of wgt. {res}    467,962

{txt}50%    {res}       82                      {txt}Mean          {res}  82.2066
                        {txt}Largest       Std. dev.     {res} 10.70208
{txt}75%    {res}       89            142
{txt}90%    {res}       96            143       {txt}Variance      {res} 114.5346
{txt}95%    {res}      100            148       {txt}Skewness      {res} .2599338
{txt}99%    {res}      109            148       {txt}Kurtosis      {res} 3.243372
{txt}
{com}. 
. 
. capture drop dbp_high
{txt}
{com}. gen dbp_high=.
{txt}(502,409 missing values generated)

{com}. replace dbp_high=1 if n_4079_0_0>=90 & n_4079_0_0~=.
{txt}(112,342 real changes made)

{com}. replace dbp_high=0 if dbp_high~=1 & n_4079_0_0~=.
{txt}(355,620 real changes made)

{com}. label var dbp_high "Diastolic blood pressure >=90 mm Hg"
{txt}
{com}. 
. tab dbp_high

  {txt}Diastolic {c |}
      blood {c |}
   pressure {c |}
 >=90 mm Hg {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}    355,620       75.99       75.99
{txt}          1 {c |}{res}    112,342       24.01      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    467,962      100.00
{txt}
{com}. 
. **allostatic load, total score**
. 
. capture drop allostatic
{txt}
{com}. gen allostatic=.
{txt}(502,409 missing values generated)

{com}. replace allostatic=albumin_low+crp_high+whr_high+tc_high+hdl_low+ghp_high+rhr_high+sbp_high+dbp_high
{txt}(379,080 real changes made)

{com}. 
. 
. save, replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\HEALTH_UKB.dta{rm}
saved
{p_end}

{com}. 
. 
. capture drop zcomorbid
{txt}
{com}. egen zcomorbid=std(comorbid)
{txt}(883 missing values generated)

{com}. 
. capture drop zbmi
{txt}
{com}. egen zbmi=std(bmi)
{txt}(3,127 missing values generated)

{com}. 
. capture drop zsrh
{txt}
{com}. egen zsrh=std(srhbr)
{txt}(3,508 missing values generated)

{com}. 
. capture drop zallostatic
{txt}
{com}. egen zallostatic=std(allostatic)
{txt}(123,329 missing values generated)

{com}. 
. capture drop rowmissHEALTH
{txt}
{com}. egen rowmissHEALTH=rowmiss(zcomorbid zbmi zsrh zallostatic)
{txt}
{com}. 
. tab rowmissHEALTH

{txt}rowmissHEAL {c |}
         TH {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}    376,162       74.87       74.87
{txt}          1 {c |}{res}    122,980       24.48       99.35
{txt}          2 {c |}{res}      2,342        0.47       99.82
{txt}          3 {c |}{res}        517        0.10       99.92
{txt}          4 {c |}{res}        408        0.08      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    502,409      100.00
{txt}
{com}. 
. capture drop HEALTH
{txt}
{com}. egen HEALTH=rmean(zcomorbid zbmi zsrh zallostatic) if rowmissHEALTH<=2
{txt}(925 missing values generated)

{com}. 
. save, replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\HEALTH_UKB.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. **************************Diabetes*************************
. capture drop diabetes
{txt}
{com}. gen diabetes = n_2443_0_0
{txt}(953 missing values generated)

{com}. recode diabetes -3 = 0 -1 =0
{txt}(1,684 changes made to {bf:diabetes})

{com}. label var diabetes "previously diagnosed with diabetes"
{txt}
{com}. 
. 
. 
. ********************Sleep duration***********************
. 
. capture drop sleep_duration
{txt}
{com}. gen sleep_duration=n_1160_0_0 if n_1160_0_0>0
{txt}(4,236 missing values generated)

{com}. 
. save, replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\HEALTH_UKB.dta{rm}
saved
{p_end}

{com}. 
. 
. ****************************STEP 8: MERGE FILES TOGETHER FOR LIFE'S ESSENTIAL 8****************************
. 
. use "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\DEMOG_SES_UKB",clear
{txt}
{com}. sort n_eid
{txt}
{com}. capture drop _merge
{txt}
{com}. save, replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\DEMOG_SES_UKB.dta{rm}
saved
{p_end}

{com}. 
. use "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\LIFESTYLENODIET_UKB",clear
{txt}
{com}. sort n_eid
{txt}
{com}. capture drop _merge
{txt}
{com}. save, replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\LIFESTYLENODIET_UKB.dta{rm}
saved
{p_end}

{com}. 
. 
. use "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\LIFESTYLEDIET_UKB",clear
{txt}
{com}. sort n_eid
{txt}
{com}. capture drop _merge
{txt}
{com}. save, replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\LIFESTYLEDIET_UKB.dta{rm}
saved
{p_end}

{com}. 
. 
. use "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\SS_UKB",clear
{txt}
{com}. sort n_eid
{txt}
{com}. capture drop _merge
{txt}
{com}. save, replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\SS_UKB.dta{rm}
saved
{p_end}

{com}. 
. use "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\HEALTH_UKB",clear
{txt}
{com}. sort n_eid
{txt}
{com}. capture drop _merge
{txt}
{com}. save, replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\HEALTH_UKB.dta{rm}
saved
{p_end}

{com}. 
. 
. use "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\NUTR_UKB",clear
{txt}
{com}. sort n_eid
{txt}
{com}. capture drop _merge
{txt}
{com}. save, replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\NUTR_UKB.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. use "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\DEMOG_SES_UKB",clear
{txt}
{com}. merge n_eid using "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\LIFESTYLENODIET_UKB"
{txt}{p}
(you are using old
{bf:merge} syntax; see
{bf:{help merge:[D] merge}} for new syntax)
{p_end}

{com}. sort n_eid
{txt}
{com}. capture drop _merge
{txt}
{com}. merge n_eid using "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\LIFESTYLEDIET_UKB"
{txt}{p}
(you are using old
{bf:merge} syntax; see
{bf:{help merge:[D] merge}} for new syntax)
{p_end}

{com}. sort n_eid
{txt}
{com}. capture drop _merge
{txt}
{com}. merge n_eid using "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\SS_UKB"
{txt}{p}
(you are using old
{bf:merge} syntax; see
{bf:{help merge:[D] merge}} for new syntax)
{p_end}

{com}. sort n_eid
{txt}
{com}. capture drop _merge
{txt}
{com}. merge n_eid using "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\HEALTH_UKB"
{txt}{p}
(you are using old
{bf:merge} syntax; see
{bf:{help merge:[D] merge}} for new syntax)
{p_end}

{com}. sort n_eid
{txt}
{com}. capture drop _merge
{txt}
{com}. merge n_eid using "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\NUTR_UKB"
{txt}{p}
(you are using old
{bf:merge} syntax; see
{bf:{help merge:[D] merge}} for new syntax)
{p_end}

{com}. sort n_eid
{txt}
{com}. capture drop _merge
{txt}
{com}. 
. save "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\LE8_UKB", replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\LE8_UKB.dta{rm}
saved
{p_end}

{com}. 
. 
. //STEP 9: GET MEDICATION VARIABLES: STATINS, ANTI-HYPERTENSIVES AND OTHER MEDICATIONS AND MERGE WITH LE8_UKB///////
. 
. use "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\SMALLERDATASETUKBfinalized", clear
{txt}
{com}. 
. keep n_eid n_20003_0_* n_20004_0_* n_6153_0_0 
{txt}
{com}. 
. save "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\MEDICATIONS_UKB", replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\MEDICATIONS_UKB.dta{rm}
saved
{p_end}

{com}. 
. *Aspirin*
. capture drop aspirin
{txt}
{com}. gen aspirin = 0
{txt}
{com}. forval i=0/47 {c -(}
{txt}  2{com}. replace aspirin = 1 if n_20003_0_`i' == 1140868226 
{txt}  3{com}. {c )-}
{txt}(51,337 real changes made)
(13,388 real changes made)
(1,815 real changes made)
(188 real changes made)
(18 real changes made)
(8 real changes made)
(1 real change made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)

{com}. label var aspirin "currently taking aspirin"
{txt}
{com}. label define aspirinL 0 "no" 1 "yes"
{txt}
{com}. label values aspirin aspirinL
{txt}
{com}. 
. *Warfarin*
. capture drop warfarin
{txt}
{com}. gen warfarin = 0
{txt}
{com}. forval i=0/47 {c -(}
{txt}  2{com}. replace warfarin = 1 if  n_20003_0_`i' == 1140888266
{txt}  3{com}. {c )-}
{txt}(384 real changes made)
(482 real changes made)
(609 real changes made)
(689 real changes made)
(646 real changes made)
(521 real changes made)
(466 real changes made)
(316 real changes made)
(260 real changes made)
(167 real changes made)
(114 real changes made)
(89 real changes made)
(63 real changes made)
(43 real changes made)
(23 real changes made)
(17 real changes made)
(13 real changes made)
(10 real changes made)
(5 real changes made)
(4 real changes made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(1 real change made)
(0 real changes made)

{com}. label var warfarin "currently taking warfarin"
{txt}
{com}. label values warfarin aspirinL
{txt}
{com}. 
. *Digoxin*
. capture drop digoxin
{txt}
{com}. gen digoxin = 0
{txt}
{com}. forval i=0/47 {c -(}
{txt}  2{com}. replace digoxin = 1 if  n_20003_0_`i' == 2038459814
{txt}  3{com}. {c )-}
{txt}(213 real changes made)
(369 real changes made)
(336 real changes made)
(188 real changes made)
(93 real changes made)
(31 real changes made)
(14 real changes made)
(6 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)

{com}. label var digoxin "currently taking digoxin"
{txt}
{com}. label values digoxin aspirinL
{txt}
{com}. 
. *Metformin*
. capture drop metformin
{txt}
{com}. gen metformin = 0
{txt}
{com}. forval i=0/47 {c -(}
{txt}  2{com}. replace metformin = 1 if  n_20003_0_`i' == 1140884600
{txt}  3{com}. {c )-}
{txt}(826 real changes made)
(1,833 real changes made)
(2,405 real changes made)
(2,515 real changes made)
(2,096 real changes made)
(1,616 real changes made)
(1,050 real changes made)
(688 real changes made)
(433 real changes made)
(238 real changes made)
(117 real changes made)
(90 real changes made)
(32 real changes made)
(27 real changes made)
(14 real changes made)
(5 real changes made)
(6 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(1 real change made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)

{com}. label var metformin "currently taking metformin"
{txt}
{com}. label values metformin aspirinL
{txt}
{com}. 
. *Radiotherapy*
. capture drop radiotherapy
{txt}
{com}. gen radiotherapy = 0 
{txt}
{com}. forval i = 0/31 {c -(}
{txt}  2{com}. replace radiotherapy = 1 if n_20004_0_`i' == 1228
{txt}  3{com}. {c )-}
{txt}(218 real changes made)
(105 real changes made)
(79 real changes made)
(36 real changes made)
(19 real changes made)
(16 real changes made)
(2 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(2 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)

{com}. 
. label var radiotherapy "thyroid radioablation therapy"
{txt}
{com}. label define radiotherapyL 0 "no" 1 "yes"
{txt}
{com}. label values radiotherapy radiotherapyL
{txt}
{com}. 
. *Menopause*
. capture drop menopause
{txt}
{com}. gen menopause = 0
{txt}
{com}. forval i = 0/31 {c -(}
{txt}  2{com}. replace menopause = 1 if n_20004_0_`i' == 1665
{txt}  3{com}. {c )-}
{txt}(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)

{com}. 
. label var menopause "menopause/menopausal symptoms"
{txt}
{com}. label define menopauseL 0 "no" 1 "yes"
{txt}
{com}. label values menopause menopauseL
{txt}
{com}. 
. 
. *Lipid Lowering Drugs*
. capture drop statins
{txt}
{com}. gen statins = .
{txt}(502,409 missing values generated)

{com}. forval i = 0/0 {c -(}
{txt}  2{com}. replace statins = 1 if n_6153_0_`i' == 1
{txt}  3{com}. {c )-}
{txt}(34,607 real changes made)

{com}. replace statins = 0 if statins ==.
{txt}(467,802 real changes made)

{com}. label var statins "currently taking statins"
{txt}
{com}. label values statins aspirinL
{txt}
{com}. 
. *Blood Pressure Treatment*
. *Lipid Lowering Drugs*
. capture drop bptreat
{txt}
{com}. gen bptreat = .
{txt}(502,409 missing values generated)

{com}. forval i = 0/0 {c -(}
{txt}  2{com}. replace bptreat = 1 if n_6153_0_`i' == 2
{txt}  3{com}. {c )-}
{txt}(27,918 real changes made)

{com}. replace bptreat = 0 if bptreat ==.
{txt}(474,491 real changes made)

{com}. label var bptreat "currently on anti-hypertensives"
{txt}
{com}. label values bptreat aspirinL
{txt}
{com}. 
. 
. 
. save,replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\MEDICATIONS_UKB.dta{rm}
saved
{p_end}

{com}. 
. 
. use "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\LE8_UKB",clear
{txt}
{com}. sort n_eid
{txt}
{com}. capture drop _merge
{txt}
{com}. save, replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\LE8_UKB.dta{rm}
saved
{p_end}

{com}. 
. 
. use "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\MEDICATIONS_UKB",clear
{txt}
{com}. sort n_eid
{txt}
{com}. capture drop _merge
{txt}
{com}. save, replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\MEDICATIONS_UKB.dta{rm}
saved
{p_end}

{com}. 
. use "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\LE8_UKB",clear
{txt}
{com}. merge n_eid using "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\MEDICATIONS_UKB"
{txt}{p}
(you are using old
{bf:merge} syntax; see
{bf:{help merge:[D] merge}} for new syntax)
{p_end}

{com}. save "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\LE8_UKB", replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\LE8_UKB.dta{rm}
saved
{p_end}

{com}. 
. 
. //STEP 10: GENERATE LIFE'S ESSENTIAL 8 INDEX//////
. 
. use "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\LE8_UKB", clear
{txt}
{com}. 
. 
. 
. **************************************COMPONENT 1: DIET************************************************
. 
. **HDI_TOTALSCORE
. 
. su HDI_TOTALSCORE

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
HDI_TOTALS~E {c |}{res}    500,986     5.06559    1.510801          0         11
{txt}
{com}. histogram HDI_TOTALSCORE
{txt}(bin={res}56{txt}, start={res}0{txt}, width={res}.19642857{txt})
{res}{txt}
{com}. 
. **>=95th percentile: 100
. **75th-94th percentile: 80
. **50th-74th: 50
. **25th-49th: 25
. **1st-24th: 0
. 
. xtile HDI_TOTALSCOREpct=HDI_TOTALSCORE,nq(100)
{txt}
{com}. 
. capture drop LE8_COMP1DIET
{txt}
{com}. gen LE8_COMP1DIET=.
{txt}(502,409 missing values generated)

{com}. replace LE8_COMP1DIET=100 if HDI_TOTALSCOREpct>=95 & HDI_TOTALSCORE~=.
{txt}(25,763 real changes made)

{com}. replace LE8_COMP1DIET=80 if HDI_TOTALSCOREpct>=75 & HDI_TOTALSCOREpct<95 & HDI_TOTALSCORE~=.
{txt}(63,590 real changes made)

{com}. replace LE8_COMP1DIET=50 if HDI_TOTALSCOREpct>=50 & HDI_TOTALSCOREpct<75 & HDI_TOTALSCORE~=.
{txt}(117,017 real changes made)

{com}. replace LE8_COMP1DIET=25 if HDI_TOTALSCOREpct>=25 & HDI_TOTALSCOREpct<50 & HDI_TOTALSCORE~=.
{txt}(127,305 real changes made)

{com}. replace LE8_COMP1DIET=0 if HDI_TOTALSCOREpct>=1 & HDI_TOTALSCOREpct<25 & HDI_TOTALSCORE~=.
{txt}(167,311 real changes made)

{com}. 
. 
. ************************************COMPONENT 2: PHYSICAL ACTIVITY*************************************
. 
. 
. *Moderate exercise MET-min/week*
. **gen modperday = n_894_0_0 if n_894_0_0 >= 0
. **label var modperday "moderate exercise minutes per day"
. 
. 
. *Vigorous exercise MET-min/week*
. **gen vigperday = n_914_0_0 if n_914_0_0 >= 0
. **label var vigperday "vigorous exercise minutes per day"
. 
. **Minutes per day of moderate or greater activity**
. 
. capture drop modvigperday
{txt}
{com}. egen modvigperday=rowtotal(modperday vigperday)
{txt}
{com}. 
. 
. **100: >=150
. **90: 120-149
. **80: 90-119
. **60: 60-89
. **40: 30-59
. **20: 1-29
. **0: 0
. 
. capture drop LE8_COMP2PA
{txt}
{com}. gen LE8_COMP2PA=.
{txt}(502,409 missing values generated)

{com}. replace LE8_COMP2PA=100 if modvigperday>=150 & modvigperday~=.
{txt}(67,447 real changes made)

{com}. replace LE8_COMP2PA=90 if modvigperday>=120 & modvigperday<150 & modvigperday~=.
{txt}(40,026 real changes made)

{com}. replace LE8_COMP2PA=80 if modvigperday>=90 & modvigperday<120 & modvigperday~=.
{txt}(40,291 real changes made)

{com}. replace LE8_COMP2PA=60 if modvigperday>=60 & modvigperday<90 & modvigperday~=.
{txt}(83,777 real changes made)

{com}. replace LE8_COMP2PA=40 if modvigperday>=30 & modvigperday<60 & modvigperday~=.
{txt}(89,960 real changes made)

{com}. replace LE8_COMP2PA=20 if modvigperday>=1 & modvigperday<30 & modvigperday~=.
{txt}(69,460 real changes made)

{com}. replace LE8_COMP2PA=0 if modvigperday==0 
{txt}(111,448 real changes made)

{com}. 
. save, replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\LE8_UKB.dta{rm}
saved
{p_end}

{com}. 
. ************************************COMPONENT 3: NICOTINE EXPOSURE*************************************
. 
. *Combine Current Smoking with Ex-smoking duration for protective effects*
. 
. 
. **gen smokingstatus = 0 if smoking == 2
. **replace smokingstatus = agestop if smokingstatus ==.
. **replace smokingstatus = 4 if smoking == 0
. **label var smokingstatus "complete smoking status"
. **label define statusL 0 "current smoker" 1 "ex-smoker < 5 years" 2 "ex-smoker between 5-10 years" 3 "ex-smoker > 10 years" 4 "never smoker"
. **label values smokingstatus statusL
. **recode smokingstatus .=4
. 
. *Environmental tobacco smoke*
. 
. **replace n_1279_0_0 = . if n_1279_0_0 < 0
. **replace n_1269_0_0  = . if n_1269_0_0 < 0
. **order n_1279_0_0, after(n_1269_0_0)
. **egen ets = rowtotal(n_1269_0_0-n_1279_0_0)
. **gen etsmoke = ets
. **label var etsmoke "environmental tobacco exposures (hours per week)"
. 
. save, replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\LE8_UKB.dta{rm}
saved
{p_end}

{com}. 
. **100 Never smoker
. ** 75 Former smoker, quit >=5 years
. ** 50 Former smoker, quit 1-<5 years
. **25 Former smoker, quit <1 year, or currently using inhaled NDS
. **0 Current smoker
. 
. capture drop LE8_COMP3NICOTINE
{txt}
{com}. gen LE8_COMP3NICOTINE=.
{txt}(502,409 missing values generated)

{com}. replace LE8_COMP3NICOTINE=100 if smokingstatus==4
{txt}(409,186 real changes made)

{com}. replace LE8_COMP3NICOTINE=75 if smokingstatus==2 | smokingstatus==3
{txt}(36,929 real changes made)

{com}. replace LE8_COMP3NICOTINE=37.5 if smokingstatus==1 
{txt}(3,332 real changes made)

{com}. replace LE8_COMP3NICOTINE=0 if smokingstatus==0
{txt}(52,962 real changes made)

{com}. replace LE8_COMP3NICOTINE=LE8_COMP3NICOTINE-20 if LE8_COMP3NICOTINE~=0 & etsmoke~=0
{txt}(90,854 real changes made)

{com}. 
. 
. 
. **[Note that 25 and 50 are combined to denote <5 years, into 37.5 ] 
. save, replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\LE8_UKB.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. *************************************COMPONENT 4: SLEEP HEALTH*****************************************
. 
. 
. **capture drop sleep_duration
. **gen sleep_duration=n_1160_0_0 if n_1160_0_0>0
. 
. 
. **100: 7-<9
. **90: 9-<10
. **70: 6-<7
. **40: 5-<6 or >=10
. **20: 4-<5
. **0: <4
. 
. 
. capture drop LE8_COMP4SLEEP
{txt}
{com}. gen LE8_COMP4SLEEP=.
{txt}(502,409 missing values generated)

{com}. replace LE8_COMP4SLEEP=100 if sleep_duration>=7 & sleep_duration<9
{txt}(336,616 real changes made)

{com}. replace LE8_COMP4SLEEP=90 if sleep_duration>=9 & sleep_duration<10
{txt}(29,098 real changes made)

{com}. replace LE8_COMP4SLEEP=70 if sleep_duration>=6 & sleep_duration<7
{txt}(95,632 real changes made)

{com}. replace LE8_COMP4SLEEP=40 if (sleep_duration>=5 & sleep_duration<6) | (sleep_duration>=10 & sleep_duration~=.)
{txt}(31,163 real changes made)

{com}. replace LE8_COMP4SLEEP=20 if sleep_duration>=4 & sleep_duration<5
{txt}(4,608 real changes made)

{com}. replace LE8_COMP4SLEEP=0 if sleep_duration<4
{txt}(1,056 real changes made)

{com}. 
. save, replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\LE8_UKB.dta{rm}
saved
{p_end}

{com}. 
. 
. **************************************COMPONENT 5: BODY MASS INDEX************************************
. 
. **https://biobank.ctsu.ox.ac.uk/crystal/field.cgi?id=23104
. 
. **capture drop bmi
. **gen bmi=n_21001_0_0 
. **label var bmi "body mass index kg/m^2" 
. 
. **100: <25
. **70: 25-29.9
. **30: 30.0-34.9
. **15: 35.0-39.9
. **0: >=40.0
. 
. 
. capture drop LE8_COMP5BMI
{txt}
{com}. gen LE8_COMP5BMI=.
{txt}(502,409 missing values generated)

{com}. replace LE8_COMP5BMI=100 if bmi<25 & bmi~=.
{txt}(164,988 real changes made)

{com}. replace LE8_COMP5BMI=70 if bmi>=25 & bmi<30
{txt}(212,071 real changes made)

{com}. replace LE8_COMP5BMI=30 if bmi>=30 & bmi<35
{txt}(87,535 real changes made)

{com}. replace LE8_COMP5BMI=15 if bmi>=35 & bmi<40
{txt}(24,989 real changes made)

{com}. replace LE8_COMP5BMI=0 if bmi>=40 & bmi~=.
{txt}(9,699 real changes made)

{com}. 
. 
. save, replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\LE8_UKB.dta{rm}
saved
{p_end}

{com}. 
. 
. ***************************************COMPONENT 6: Blood lipids **************************************
. 
. **ELEVATED TC, >=240 mg/dL: divide by 38.67 to get mmol/L: >=6.21 mmol/L
. 
. **https://biobank.ctsu.ox.ac.uk/crystal/field.cgi?id=30690,det
. **https://www.omnicalculator.com/health/cholesterol-units
. 
. su n_30690_0_0, det

                         {txt}Cholesterol
{hline 61}
      Percentiles      Smallest
 1%    {res}    3.223           .601
{txt} 5%    {res}    3.888          1.432
{txt}10%    {res}    4.263          1.498       {txt}Obs         {res}    469,481
{txt}25%    {res}    4.906          1.551       {txt}Sum of wgt. {res}    469,481

{txt}50%    {res}     5.65                      {txt}Mean          {res} 5.692449
                        {txt}Largest       Std. dev.     {res} 1.144948
{txt}75%    {res}    6.424          13.53
{txt}90%    {res}    7.165         13.615       {txt}Variance      {res} 1.310906
{txt}95%    {res}     7.64         13.719       {txt}Skewness      {res} .2856572
{txt}99%    {res}    8.606          15.46       {txt}Kurtosis      {res} 3.338082
{txt}
{com}. 
. 
. 
. **LOW HDL-C, <40 mg/dL: divide by 38.67 to get mmol/L: <1.034 mmol/L**
. **https://biobank.ctsu.ox.ac.uk/crystal/field.cgi?id=30760
. **https://www.omnicalculator.com/health/cholesterol-units
. 
. su n_30760_0_0, det

                       {txt}HDL cholesterol
{hline 61}
      Percentiles      Smallest
 1%    {res}     .775           .219
{txt} 5%    {res}     .917           .226
{txt}10%    {res}    1.003           .228       {txt}Obs         {res}    429,774
{txt}25%    {res}     1.17           .252       {txt}Sum of wgt. {res}    429,774

{txt}50%    {res}    1.398                      {txt}Mean          {res} 1.448002
                        {txt}Largest       Std. dev.     {res} .3823061
{txt}75%    {res}    1.674          4.107
{txt}90%    {res}     1.96          4.129       {txt}Variance      {res}  .146158
{txt}95%    {res}    2.147          4.186       {txt}Skewness      {res} .7756026
{txt}99%    {res}    2.539          4.401       {txt}Kurtosis      {res} 3.958405
{txt}
{com}. 
. 
. capture drop nonhdlchol
{txt}
{com}. gen nonhdlchol=(n_30690_0_0-n_30760_0_0)
{txt}(72,714 missing values generated)

{com}. 
. 
. *Lipid Lowering Drugs*
. capture drop statins
{txt}
{com}. gen statins = .
{txt}(502,409 missing values generated)

{com}. forval i = 0/0 {c -(}
{txt}  2{com}. replace statins = 1 if n_6153_0_`i' == 1
{txt}  3{com}. {c )-}
{txt}(34,607 real changes made)

{com}. replace statins = 0 if statins ==.
{txt}(467,802 real changes made)

{com}. label var statins "currently taking statins"
{txt}
{com}. label values statins aspirinL
{txt}
{com}. 
. 
. **100: <130 or <3.36
. **60: 130-159 or 3.36-<4.13
. **40: 160-189 or 4.13-<4.91
. **20: 190-219 or 4.91-<5.69
. **0: >=220 or >=5.69
. 
. capture drop LE8_COMP6LIPIDS
{txt}
{com}. gen LE8_COMP6LIPIDS=.
{txt}(502,409 missing values generated)

{com}. replace LE8_COMP6LIPIDS=100 if nonhdlchol<3.36
{txt}(91,696 real changes made)

{com}. replace LE8_COMP6LIPIDS=60 if nonhdlchol>=3.36 & nonhdlchol<4.13
{txt}(114,998 real changes made)

{com}. replace LE8_COMP6LIPIDS=40 if nonhdlchol>=4.13 & nonhdlchol<4.91
{txt}(112,871 real changes made)

{com}. replace LE8_COMP6LIPIDS=20 if nonhdlchol>=4.91 & nonhdlchol<5.69
{txt}(69,325 real changes made)

{com}. replace LE8_COMP6LIPIDS=0 if nonhdlchol>=5.69 & nonhdlchol~=.
{txt}(40,805 real changes made)

{com}. replace LE8_COMP6LIPIDS=LE8_COMP6LIPIDS-20 if LE8_COMP6LIPIDS~=0 & statins==1
{txt}(28,636 real changes made)

{com}. 
. save, replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\LE8_UKB.dta{rm}
saved
{p_end}

{com}. 
. ***************************************COMPONENT 7: Blood glucose or HbA1c*************************************
. 
. **Glycated hemoglobin, % change to mmol/mol: (35.3 mmol/mol is 5.4%), cutoff in % is 6.4% --> 46 mmol/mol
. **Use the converter below
. 
. **https://www.hba1cnet.com/hba1c-calculator/
. **https://biobank.ctsu.ox.ac.uk/crystal/field.cgi?id=30750
. 
. su n_30750_0_0,det

                {txt}Glycated haemoglobin (HbA1c)
{hline 61}
      Percentiles      Smallest
 1%    {res}       26             15
{txt} 5%    {res}     29.1           15.3
{txt}10%    {res}     30.5           15.3       {txt}Obs         {res}    466,394
{txt}25%    {res}     32.8           15.3       {txt}Sum of wgt. {res}    466,394

{txt}50%    {res}     35.2                      {txt}Mean          {res} 36.13129
                        {txt}Largest       Std. dev.     {res} 6.775722
{txt}75%    {res}     37.9          265.6
{txt}90%    {res}     41.1          266.3       {txt}Variance      {res}  45.9104
{txt}95%    {res}     45.1          296.1       {txt}Skewness      {res} 4.895931
{txt}99%    {res}     64.7          515.2       {txt}Kurtosis      {res} 95.77651
{txt}
{com}. 
. 
. 
. *Diabetes*
. **gen diabetes = n_2443_0_0
. **recode diabetes -3 = 0 -1 =0
. **label var diabetes "previously diagnosed with diabetes"
. **label values diabetes aspirinL
. 
. **Points        Level (for HANDLS SE8)
. **100   If dxDiabetes is not "Diabetes" and hbA1c < 5.7
. **60    If dxDiabetes is not "Diabetes" and HbA1c 5.7–6.4
. **40    HbA1c <7.0 and dxDiabetes = "Diabetes", 
. **OR If dxDiabetes is not "Diabetes"(or dx missing) and HbA1C 6.4-7.0
. **30    HbA1c 7.0–7.9  (regardless of dx)
. **20    HbA1c 8.0–8.9  (regardless of dx)
. **10    Hb A1c 9.0–9.9  (regardless of dx)
. **0     HbA1c ≥10.0  (regardless of dx)
. 
. 
. capture drop LE8_COMP7GLUC
{txt}
{com}. gen LE8_COMP7GLUC=.
{txt}(502,409 missing values generated)

{com}. replace LE8_COMP7GLUC=100 if diabetes==0 & n_30750_0_0<39 
{txt}(377,165 real changes made)

{com}. replace LE8_COMP7GLUC=60 if  diabetes==0 & (n_30750_0_0>=39 &  n_30750_0_0<46)
{txt}(58,985 real changes made)

{com}. replace LE8_COMP7GLUC=40 if  (diabetes==1 & (n_30750_0_0<53)) | (diabetes==0 & (n_30750_0_0>=46 & n_30750_0_0<53))
{txt}(18,199 real changes made)

{com}. replace LE8_COMP7GLUC=30 if  (n_30750_0_0>=53 & n_30750_0_0<64)
{txt}(6,627 real changes made)

{com}. replace LE8_COMP7GLUC=20 if  (n_30750_0_0>=64 & n_30750_0_0<75)
{txt}(2,776 real changes made)

{com}. replace LE8_COMP7GLUC=10 if  (n_30750_0_0>=75 & n_30750_0_0<86)
{txt}(1,138 real changes made)

{com}. replace LE8_COMP7GLUC=0 if  (n_30750_0_0>=86) & n_30750_0_0~=.
{txt}(1,051 real changes made)

{com}. 
. save, replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\LE8_UKB.dta{rm}
saved
{p_end}

{com}. 
. ***************************************COMPONENT 8: Blood pressure************************************
. 
. 
. **Systolic blood pressure, automated reading, mm Hg, >=140 mm Hg: 
. **https://biobank.ctsu.ox.ac.uk/crystal/field.cgi?id=4080
. 
. su n_4080_0_0,det

         {txt}Systolic blood pressure, automated reading
{hline 61}
      Percentiles      Smallest
 1%    {res}      101             62
{txt} 5%    {res}      110             68
{txt}10%    {res}      116             69       {txt}Obs         {res}    467,949
{txt}25%    {res}      126             69       {txt}Sum of wgt. {res}    467,949

{txt}50%    {res}      138                      {txt}Mean          {res} 139.7411
                        {txt}Largest       Std. dev.     {res} 19.69681
{txt}75%    {res}      152            254
{txt}90%    {res}      166            260       {txt}Variance      {res} 387.9642
{txt}95%    {res}      175            264       {txt}Skewness      {res} .4963807
{txt}99%    {res}      192            268       {txt}Kurtosis      {res} 3.396021
{txt}
{com}. 
. 
. **Diastolic blood pressure, automated reading, mm Hg, >=90 mm Hg: 
. **https://biobank.ctsu.ox.ac.uk/crystal/field.cgi?id=4079
. 
. su n_4079_0_0,det

         {txt}Diastolic blood pressure, automated reading
{hline 61}
      Percentiles      Smallest
 1%    {res}       59             32
{txt} 5%    {res}       65             35
{txt}10%    {res}       69             35       {txt}Obs         {res}    467,962
{txt}25%    {res}       75             38       {txt}Sum of wgt. {res}    467,962

{txt}50%    {res}       82                      {txt}Mean          {res}  82.2066
                        {txt}Largest       Std. dev.     {res} 10.70208
{txt}75%    {res}       89            142
{txt}90%    {res}       96            143       {txt}Variance      {res} 114.5346
{txt}95%    {res}      100            148       {txt}Skewness      {res} .2599338
{txt}99%    {res}      109            148       {txt}Kurtosis      {res} 3.243372
{txt}
{com}. 
. 
. *Blood Pressure Treatment*
. 
. **capture drop bptreat
. **gen bptreat = .
. **forval i = 0/3 {c -(}
. **replace bptreat = 1 if n_6153_0_`i' == 2
. **{c )-}
. **replace bptreat = 0 if bptreat ==.
. **label var bptreat "currently on anti-hypertensives"
. **label values bptreat aspirinL
. 
. 
. **100: <120/<80 (Optimal)
. **75: 120-129/<80 (Elevated)
. **50: 130-139 or 80-89 (Stage | HTN)
. **25: 140-159 or 90-99
. **0: >=160 or >=100
. **Subtact 20 pionts if treated level**
. 
. capture drop LE8_COMP8BP
{txt}
{com}. gen LE8_COMP8BP=.
{txt}(502,409 missing values generated)

{com}. replace LE8_COMP8BP=100 if n_4080_0_0<120 & n_4079_0_0<80
{txt}(63,155 real changes made)

{com}. replace LE8_COMP8BP=75 if (n_4080_0_0>=120 & n_4080_0_0<130) & n_4079_0_0<80
{txt}(53,791 real changes made)

{com}. replace LE8_COMP8BP=50 if (n_4080_0_0>=130 & n_4080_0_0<140) | (n_4079_0_0>=80 & n_4079_0_0<90)
{txt}(212,276 real changes made)

{com}. replace LE8_COMP8BP=25 if (n_4080_0_0>=140 & n_4080_0_0<160) | (n_4079_0_0>=90 & n_4079_0_0<100)
{txt}(189,392 real changes made)

{com}. replace LE8_COMP8BP=0 if (n_4080_0_0>=160 & n_4080_0_0~=.) | (n_4079_0_0>=100 & n_4079_0_0~=.)
{txt}(81,929 real changes made)

{com}. replace LE8_COMP8BP=LE8_COMP8BP-20 if LE8_COMP8BP~=0 & bptreat==1
{txt}(18,286 real changes made)

{com}. 
. 
. 
. *******************************************LE8 TOTAL SCORE**********************************************
. capture drop rowmissLE8TOTAL
{txt}
{com}. egen rowmissLE8TOTAL=rowmiss(LE8_COMP1DIET LE8_COMP2PA LE8_COMP3NICOTINE LE8_COMP4SLEEP LE8_COMP5BMI LE8_COMP6LIPIDS LE8_COMP7GLUC LE8_COMP8BP)
{txt}
{com}. 
. tab rowmissLE8TOTAL

{txt}rowmissLE8T {c |}
       OTAL {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}    376,519       74.94       74.94
{txt}          1 {c |}{res}    105,768       21.05       95.99
{txt}          2 {c |}{res}     15,498        3.08       99.08
{txt}          3 {c |}{res}      3,605        0.72       99.80
{txt}          4 {c |}{res}        608        0.12       99.92
{txt}          5 {c |}{res}         49        0.01       99.93
{txt}          6 {c |}{res}        362        0.07      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    502,409      100.00
{txt}
{com}. 
. capture drop LE8_TOTALSCORE
{txt}
{com}. egen LE8_TOTALSCORE=rmean(LE8_COMP1DIET LE8_COMP2PA LE8_COMP3NICOTINE LE8_COMP4SLEEP LE8_COMP5BMI LE8_COMP6LIPIDS LE8_COMP7GLUC LE8_COMP8BP) if rowmissLE8TOTAL<=4
{txt}(411 missing values generated)

{com}. 
. replace LE8_TOTALSCORE=LE8_TOTALSCORE*8
{txt}(501,998 real changes made)

{com}. 
. 
. *******************************************LE8 LIFESTYLE SCORE*******************************************
. capture drop rowmissLE8LIFESTYLE
{txt}
{com}. egen rowmissLE8LIFESTYLE=rowmiss(LE8_COMP1DIET LE8_COMP2PA LE8_COMP3NICOTINE LE8_COMP4SLEEP)
{txt}
{com}. 
. tab rowmissLE8LIFESTYLE

{txt}rowmissLE8L {c |}
   IFESTYLE {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}    497,906       99.10       99.10
{txt}          1 {c |}{res}      3,347        0.67       99.77
{txt}          2 {c |}{res}      1,156        0.23      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    502,409      100.00
{txt}
{com}. 
. capture drop LE8_LIFESTYLE
{txt}
{com}. egen LE8_LIFESTYLE=rmean(LE8_COMP1DIET LE8_COMP2PA LE8_COMP3NICOTINE LE8_COMP4SLEEP) if rowmissLE8LIFESTYLE<=2
{txt}
{com}. 
. 
. replace LE8_LIFESTYLE=LE8_LIFESTYLE*4
{txt}(502,126 real changes made)

{com}. 
. 
. 
. ********************************************LE8 BIOLOGICAL SCORE***********************************************
. capture drop rowmissLE8BIOLOGICAL
{txt}
{com}. egen rowmissLE8BIOLOGICAL=rowmiss(LE8_COMP5BMI LE8_COMP6LIPIDS LE8_COMP7GLUC LE8_COMP8BP)
{txt}
{com}. 
. tab rowmissLE8BIOLOGICAL

{txt}rowmissLE8B {c |}
  IOLOGICAL {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}    379,070       75.45       75.45
{txt}          1 {c |}{res}    104,601       20.82       96.27
{txt}          2 {c |}{res}     14,844        2.95       99.22
{txt}          3 {c |}{res}      3,096        0.62       99.84
{txt}          4 {c |}{res}        798        0.16      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    502,409      100.00
{txt}
{com}. 
. capture drop LE8_BIOLOGICAL
{txt}
{com}. egen LE8_BIOLOGICAL=rmean(LE8_COMP5BMI LE8_COMP6LIPIDS LE8_COMP7GLUC LE8_COMP8BP) if rowmissLE8BIOLOGICAL<=2
{txt}(3,894 missing values generated)

{com}. 
. replace LE8_BIOLOGICAL=LE8_BIOLOGICAL*4
{txt}(498,399 real changes made)

{com}. 
.  
. 
. save, replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\LE8_UKB.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. //STEP 11: GENERATE COGNITION VARIABLES//
. 
. use "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\SMALLERDATASETUKBfinalized", clear
{txt}
{com}. 
. keep n_eid n_20023_0_0 n_399_0_1 n_399_0_2 n_400_0_1 n_400_0_2 
{txt}
{com}. 
. save "E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\COGN_UKB",replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\COGN_UKB.dta{rm}
saved
{p_end}

{com}. 
. capture drop n_400_0_1r
{txt}
{com}. capture drop n_400_0_2r
{txt}
{com}. 
. gen n_400_0_1r=n_400_0_1 
{txt}(4,645 missing values generated)

{com}. gen n_400_0_2r=n_400_0_2 
{txt}(4,645 missing values generated)

{com}. 
. destring n_399_0_1 n_399_0_2 n_400_0_1r n_400_0_2r,replace
{txt}n_399_0_1 already numeric; no {res}replace
{txt}n_399_0_2 already numeric; no {res}replace
{txt}n_400_0_1r already numeric; no {res}replace
{txt}n_400_0_2r already numeric; no {res}replace
{txt}
{com}. 
. **Reaction time: mean time to correctly identify matches**
. **https://biobank.ctsu.ox.ac.uk/crystal/field.cgi?id=20023
. 
. capture drop REACTION_TIME
{txt}
{com}. gen REACTION_TIME=.
{txt}(502,409 missing values generated)

{com}. replace REACTION_TIME=ln(n_20023_0_0)
{txt}(496,565 real changes made)

{com}. 
. 
. 
. **Pairs matching: number incorrect**
. **https://biobank.ctsu.ox.ac.uk/crystal/field.cgi?id=399
. capture drop n_399_0_mean
{txt}
{com}. gen n_399_0_mean=(n_399_0_1+n_399_0_2)/2
{txt}(4,645 missing values generated)

{com}. 
. su n_399_0_mean

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
n_399_0_mean {c |}{res}    497,764     2.34483    1.889851          0         97
{txt}
{com}. 
. 
. capture drop PAIRSMATCHING_INC
{txt}
{com}. gen PAIRSMATCHING_INC=.
{txt}(502,409 missing values generated)

{com}. replace PAIRSMATCHING_INC=ln(n_399_0_mean)
{txt}(464,653 real changes made)

{com}. 
. save, replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\COGN_UKB.dta{rm}
saved
{p_end}

{com}. 
. **Pairs matching: time to complete**
. **https://biobank.ctsu.ox.ac.uk/crystal/field.cgi?id=400
. 
. capture drop n_400_0_mean
{txt}
{com}. gen n_400_0_mean=(n_400_0_1r+n_400_0_2r)/2
{txt}(4,645 missing values generated)

{com}. 
. 
. capture drop PAIRSMATCHING_TTC
{txt}
{com}. gen PAIRSMATCHING_TTC=.
{txt}(502,409 missing values generated)

{com}. replace PAIRSMATCHING_TTC=ln(n_400_0_mean)
{txt}(485,708 real changes made)

{com}. 
. 
. capture drop rowmissCOGN
{txt}
{com}. egen rowmissCOGN=rowmiss(REACTION_TIME PAIRSMATCHING_INC PAIRSMATCHING_TTC)
{txt}
{com}. 
. tab rowmissCOGN

{txt}rowmissCOGN {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}    461,060       91.77       91.77
{txt}          1 {c |}{res}     25,747        5.12       96.89
{txt}          2 {c |}{res}     12,252        2.44       99.33
{txt}          3 {c |}{res}      3,350        0.67      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}    502,409      100.00
{txt}
{com}. 
. ***PCA for cognitive performance**
. 
. pca REACTION_TIME PAIRSMATCHING_INC PAIRSMATCHING_TTC if rowmissCOGN<=1, factors(1)

{txt}Principal components/correlation{col 50}Number of obs    = {res}   461,060
{col 50}{txt}Number of comp.  = {res}         1
{col 50}{txt}Trace            {col 67}=  {res}        3
{col 5}{txt}Rotation: (unrotated = principal){col 50}Rho              = {res}    0.6023

{txt}{col 5}{hline 13}{c TT}{hline 60}
{col 5}   Component {c |}   Eigenvalue   Difference         Proportion   Cumulative
{col 5}{hline 13}{c +}{hline 60}
{col 5}{ralign 12:Comp1} {c |}{res}      1.80695      .916352             0.6023       0.6023
{txt}{col 5}{ralign 12:Comp2} {c |}{res}      .890597      .588142             0.2969       0.8992
{txt}{col 5}{ralign 12:Comp3} {c |}{res}      .302455            .             0.1008       1.0000
{txt}{col 5}{hline 13}{c BT}{hline 60}

Principal components (eigenvectors) 

{space 4}{hline 13}{c  TT}{hline 10}{c  TT}{hline 13}
{space 4}{space 0}{ralign 12:Variable}{space 1}{c |}{space 1}{ralign 8:Comp1}{space 1}{c |}{space 1}{ralign 11:Unexplained}{space 1}
{space 4}{hline 13}{c   +}{hline 10}{c   +}{hline 13}
{space 4}{space 0}{ralign 12:REACTION_T~E}{space 1}{c |}{space 1}{ralign 8:{res:{sf:  0.3595}}}{space 1}{c |}{space 1}{center 11:{res:{sf:      .7665}}}{space 1}
{space 4}{space 0}{ralign 12:PAIRSMATC~NC}{space 1}{c |}{space 1}{ralign 8:{res:{sf:  0.6464}}}{space 1}{c |}{space 1}{center 11:{res:{sf:      .2451}}}{space 1}
{space 4}{space 0}{ralign 12:PAIRSMATC~TC}{space 1}{c |}{space 1}{ralign 8:{res:{sf:  0.6730}}}{space 1}{c |}{space 1}{center 11:{res:{sf:      .1815}}}{space 1}
{space 4}{hline 13}{c  BT}{hline 10}{c  BT}{hline 13}

{com}. predict POORCOGN
{txt}({bf:score} assumed)

Scoring coefficients 
{col 5}sum of squares(column-loading) = 1

{space 4}{hline 13}{c  TT}{hline 10}
{space 4}{space 0}{ralign 12:Variable}{space 1}{c |}{space 1}{ralign 8:Comp1}{space 1}
{space 4}{hline 13}{c   +}{hline 10}
{space 4}{space 0}{ralign 12:REACTION_T~E}{space 1}{c |}{space 1}{ralign 8:{res:{sf:  0.3595}}}{space 1}
{space 4}{space 0}{ralign 12:PAIRSMATC~NC}{space 1}{c |}{space 1}{ralign 8:{res:{sf:  0.6464}}}{space 1}
{space 4}{space 0}{ralign 12:PAIRSMATC~TC}{space 1}{c |}{space 1}{ralign 8:{res:{sf:  0.6730}}}{space 1}
{space 4}{hline 13}{c  BT}{hline 10}

{com}.  
. save , replace
{txt}{p 0 4 2}
file {bf}
E:\16GBBACKUPUSB\BACKUP_USB_SEPTEMBER2014\May Baydoun_folder\UK_BIOBANK_PROJECT\UKB_PAPER9B_TDIPDDEMMORT\DATA\COGN_UKB.dta{rm}
saved
{p_end}

{com}. 
. capture log close
{smcl}
{com}{sf}{ul off}